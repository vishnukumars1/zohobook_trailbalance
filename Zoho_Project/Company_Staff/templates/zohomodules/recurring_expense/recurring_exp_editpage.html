{% extends 'base.html' %}
{% block content %}
{% load static %}

<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>



<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E="
crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!--dropdown button-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://kit.fontawesome.com/274ee977b7.js" crossorigin="anonymous"></script>


<style>
  label{
      color: white;
  }
  .section-3
  {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      margin-top: 1rem;
  }
  .section-3 .section-toggle
  {
      margin-bottom: 0.50rem;
  }
   .section-toggle a
  {

      color: rgb(230, 171, 45);
      font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
      font-size:1.275rem;
  }
  .add_another
  {
     
      color: rgb(230, 171, 45);
  }
  #tbl thead th{
      font-size: 0.785rem;
  }
  .add_another1
  {
     
      color: rgb(230, 171, 45);
  }
  #tbl1 thead th{
      font-size: 0.785rem;
  }
  @media (max-width:700px)
  {
  .section-3
  {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 1fr ;  

  }
  .section-3 .section-toggle a
  {

      color: rgb(230, 171, 45);
      font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
      font-size:0.875rem;
  }
  }
 
  .modal{
    z-index: 9999;
    overflow: scroll;
  }
  /* width */
  ::-webkit-scrollbar {
      width: 10px;
  }

  /* Track */
  ::-webkit-scrollbar-track {
      background: #f1f1f1;
  }

  /* Handle */
  ::-webkit-scrollbar-thumb {
      background: #888;
  }

  /* Handle on hover */
  ::-webkit-scrollbar-thumb:hover {
      background: #555;
  }

  .hide {
      display: none;
  }
  .hidden {
    display: none;
}
.selectize-input.full {
  background-color:black !important;
  color: white !important;
  border: 1px solid white!important;
  border-radius: 7px;
  height: 100%;
 }
 
  .popup-0 {
    height: 17rem;
    width: 20rem;
    background-color: rgb(3, 3, 3);
    border-radius: 1rem;
    position: absolute;
    margin-bottom:70rem;
    left: 0%;
    transform: translate(-50%, -50%)scale(0.1);
    text-align: center;
    padding: 0 5rem 5 rem;
    color: black;
    
    visibility: hidden;
    transform: translate(-50%, -50%)scale(0.1);

  }

  .open-popup-3 {
    margin-top: -30rem;
    visibility: visible;
    transform: translate(-50%, -50%)scale(1);
    transition: transform 0.4s, top 0.4s;
    margin-left: 40rem;
  background-color: #000;
  }
  ::placeholder {
    color: black; /* Change this to the desired color */
  }
  label {
    color:white; /* Change this to the desired color */
  }
  input[type="text"],
input[type="number"],
input[type="email"],
input[type="date"] {
color: white; /* Change this to the desired color */
}

</style>

<style>
    /* .......................................... search box1.............. */
    .select-box1 {
        position: relative;
        width: 70%;
    }
    

    .select-option1 {
        position: relative;
        
    }

    .select-option1 input {
        width: 100%;
        cursor: pointer;
        background-color: white;
        color: black;
        border-radius: 7px;
        padding: 10px 15px;
        border: 0 !important;
        outline: 0 !important;
    }

    .select-option1:after {
        content: "";
        border-top: 12px solid #000;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        position: absolute;
        right: 15px;
        top: 50%;
        margin-top: -8px;

    }

    .content1 {
        background-color: white;
        position: absolute;
        color: black;
        border-radius: 7px;
        margin-top: 15px;
        width: 100%;
        z-index: 999;
        padding: 20px;
        display: none;
    }

    .search1 input {
        width: 100%;
        font-size: 17px;
        padding: 15px;
        outline: 0;
        border: 1px solid #b3b3b3;
        border-radius: 5px;
    }

    .options1 {
        margin-top: 10px;
        max-height: 150px;
        overflow-y: scroll;
        padding: 0;
    }

    /* .options1::-webkit-scrollbar{
        width: 5px;
       
      } */
    .options1 li {
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        border-bottom: 1px solid gray;
    }

    .select-box1.active .content1 {
        display: block;
    }

    .select-box1.active .select-option1:after {
        transform: rotate(-180deg);
    }

    optgroup{
        background-color: #000;
        color: white;
    }
</style>

<div class="body-wrapper">
  <div class="container-fluid">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'company_dashboard' %}" class="text-warning-emphasis">Dashboard</a></li>
        <li class="breadcrumb-item"><a class="text-warning-emphasis">Purchase</a></li>
        <li class="breadcrumb-item"><a href="{%url 'recurring_expenses_listpage' %}" class="text-warning-emphasis">Recurring Expense listout</a></li>

        <li class="breadcrumb-item" aria-current="page">Edit</li>
      </ol>
    </nav>


      <div class="row mt-5">
          <div class="col-md-12">
            <div class="card mb-5 p-5" style="background-color: black; border-radius: 1vh;">
              <div class=" radius-15">
                <div >
                  <div >
                    <center><h3 class="mb-0 text-light"> EDIT RECURRING EXPENSE</h3></center>
                  </div>
                  <hr />
                </div>
              </div>
                <h4 class="mb-0 text-warning"><b>Recurring Expense Details</b></h4><br>
              <form action="{%url 'updateRecurringexpense' expense.id%}" method="post" enctype="multipart/form-data"id="myForm">
                {% csrf_token %}
                <div class="row">
                  
                 
                  <label for="date" class="col-md-3 p-3 labels">Date</label>
                  <div class="col-md-6 p-3">
                    <input  class="form-control text-white bg-black" type="date" id="date" name="date" value="{{expense.exp_date|date:'Y-m-d'}}" required>
                  </div>
                </div>
                
                <div class="row">
                  <label for="name" class="col-md-3 p-3 labels">Expense Account</label>
                 
                  <div class="col-md-6 p-3 d-flex">
                      <div class="w-100">
                          <div class="p-0 border-0 bg-none position-relative drop-box" style="display: block; background-color: #000000;color: white;">
                            <select name="cost_acc" class="form-control form-select text-white bg-black" id="myaccount" style="background-color: black; color: white;border-radius: 5px;" >
                                <option value="0">--Select Account--</option>
                                <option value="{{expense.chart_of_accounts.id}}" selected hidden>{{expense.chart_of_accounts.account_name}}</option>
                                <optgroup id="expensesel" label="Expense">
                           
                                {% for i in accounts %}
    
                                {% if i.account_type == 'Expense' %}
                              
                                  <option value="{{i.id}}">{{i.account_name}}</option>
                          
                                {% endif %}
                                {% endfor %}
                              </optgroup>
                             
                                <optgroup id="otherexpensesel" label="Other Expense">
                                {% for i in accounts %}
                                {% if i.account_type == 'Other Expense' %}
                          
                                  <option value="{{i.id}}">{{i.account_name}}</option>
                                  
                                  {% endif %}
                                  {% endfor %}
                                </optgroup>
                    
                               
                            
                              </select>   
                              </div>
                              
                         
                      </div>
                      
                    &nbsp;&nbsp;  <button type="button" data-toggle="modal" data-target="#newAccount" class="btn btn-outline-warning ml-1" style="height: fit-content;">+</button>
                  </div>
                </div>
               
          
                <div class="row">
                  <label for="ac_no" class="col-md-3 p-3 labels">Expense Type</label>
                  <div class="col-md-6 p-3">
                    <select class="form-control form-select bg-black" name="expense_type" style=" color: white;" id="expenseType" required>
                        <option value="" hidden> Select Expense Type</option>
                       <option value="{{expense.expense_type}}" selected hidden>{{expense.expense_type}}</option>
                        <option value="Goods"> Goods </option>
                        <option value="Service"> Service </option>
                    </select>
                  </div>
                </div>
                {%if expense.hsn %}
                <div class="row"  id="hsnNoField">
                    <label class="col-md-3 p-3 labels">HSN</label>
                    
                <div class="col-md-6 p-3" >
                 <span class="text-danger" id="hsnErr"></span> 
                    <input type="text" class="form-control text-light" name="hsn" id="hsnInput" value="{{expense.hsn}}" >
                </div>
                </div>
                {%else%}
                <div class="row"  style="display: none;" id="hsnNoField">
                  <label class="col-md-3 p-3 labels">HSN</label>
                  
              <div class="col-md-6 p-3" >
               <span class="text-danger" id="hsnErr"></span> 
                  <input type="text" class="form-control text-light" name="hsn" id="hsnInput" >
              </div>
              </div>
              {%endif%}
              {%if expense.sac %}
                <div class="row"  id="sacNoField">
                    <label class="col-md-3 p-3 labels">SAC</label>
                   
                <div class="col-md-6 p-3"  >
                    <span class="text-danger" id="sacErr"></span>
                    <input type="text" class="form-control text-light" name="sac" id="sacInput" value="{{expense.sac}}" >
                </div>
                </div>
                {%else%}
                <div class="row" style="display: none;" id="sacNoField">
                  <label class="col-md-3 p-3 labels">SAC</label>
                 
              <div class="col-md-6 p-3"  >
                  <span class="text-danger" id="sacErr"></span>
                  <input type="text" class="form-control text-light" name="sac" id="sacInput" >
              </div>
              </div>
              {%endif%}

          
                <div class="row">
                  <label for="branch" class="col-md-3 p-3 labels">Expense No</label>
                  <div class="col-md-6 p-3">
                    <input type="text" class="form-control text-white bg-black" name="expense_no"  id="expenseNumber" value="{{expense.Expense_Number}}"  placeholder="{{rexp}}" readonly>
                    <span class="text-danger ml-3" id="invNoErr"></span>
                </div>
                </div>
                <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels">Reference Number</label>
                    <div class="col-md-6 p-3">
                        <input type="text" class="form-control" name="reference_number" value="{{expense.refrenceid}}"  readonly>
                    </div>
                  </div>

                  <div class="row"  >
                    <label for="ifsc" class="col-md-3 p-3 labels">Profile Name</label>
                    <div class="col-md-6 p-3">
                        <input type="text" class="form-control text-light bg-black" style=" color:white;" value="{{expense.profile_name}}"  name="profile" >  
                    </div>
                  </div>

                  <div class="row">
                    <label for="opn_bal" class="col-md-3 p-3 labels">Amount</label>
                    <div class="col-md-6 p-3">
                      <div class="input-group">
                        <div class="input-group-append">
                          <select class="form-control form-select text-white bg-black" id="" name="">
                            <option value="INR">INR</option>
                           
                          </select>
                        </div>
                        <input type="number" class="form-control text-white bg-black" id="amount" name="amount" value="{{expense.amount}}">
                      </div>
                    </div>
                  </div>
          
                <div class="row">
                  <label for="ifsc" class="col-md-3 p-3 labels">Payment Type</label>
                  <div class="col-md-6 p-3">
                    <select class="form-control form-select text-white bg-black" id="paymentMethod" name="payment_method" >
                        
                        <option value="" hidden>Select Payment Method</option>
                        <option value="{{expense.Payment_Method}} " selected hidden>{{expense.Payment_Method}}</option>
                        <option value="Cash">Cash</option>
                        <option value="Cheque">Cheque</option>
                        <option value="UPI">UPI</option>
                        {% for b in banks %}
                        <option value="{{ b.bnk_name }}" text="{{ b.id }}">{{ b.bnk_name }} (XXX{{ b.bnk_acno|slice:"-4:" }})</option>
                        {% endfor %}
                    </select>
                  </div>
                  {%if expense.cheque_id %}
                  <div class="row"  id="chequediv">
                    <label class="col-md-3 p-3 labels" >Cheque No</label>
                  <div class="col-md-6 p-3"  >
                    
                    <input type="text" class="form-control bg-black text-light" name="cheque_id" id="cheque_id" value="{{expense.cheque_id}}">
                </div>
                </div>
                {%else%}
                  <div class="row" style="display:none;"  id="chequediv">
                    <label class="col-md-3 p-3 labels" >Cheque No</label>
                  <div class="col-md-6 p-3"  >
                    
                    <input type="text" class="form-control bg-black text-light" name="cheque_id" id="cheque_id" placeholder="Enter Cheque No">
                </div>
                </div>
                {%endif%}
                {% if expense.upi_number%}
                <div class="row"id="upidiv">
                    <label class="col-md-3 p-3 labels">UPI ID</label>
                <div class="col-md-6 p-3"   >
                    
                    <input type="text" class="form-control bg-black text-light" name="upi_id" id="upi_id" value="{{expense.upi_number}}" placeholder="Enter UPI ID">
                </div>
                </div>
                {%else%}
                <div class="row" style="display:none;" id="upidiv">
                  <label class="col-md-3 p-3 labels">UPI ID</label>
              <div class="col-md-6 p-3"   >
                  
                  <input type="text" class="form-control bg-black text-light" name="upi_id" id="upi_id" placeholder="Enter UPI ID">
              </div>
              </div>

                {%endif%}
                {% if expense.bank_account %}
                <div class="row"  id="bnkdiv">
                  <label class="col-md-3 p-3 labels" >Account No</label>
              <div class="col-md-6 p-3"  >
                  
                  <input type="text" class="form-control bg-black text-light" name="bnk_id" id="bnk_id"  value="{{expense.bank_account}}" readonly>
              </div>
              </div>
              {%else%}

                <div class="row" style="display:none;" id="bnkdiv">
                    <label class="col-md-3 p-3 labels" >Account No</label>
                <div class="col-md-6 p-3"  >
                    
                    <input type="text" class="form-control bg-black text-light" name="bnk_id" id="bnk_id"  readonly>
                </div>
                </div>
               {%endif%}

               <div class="row" >
                <label class="col-md-3 p-3 labels" >Repeat Every</label>
            <div class="col-md-6 p-3"  >
                <div class="d-flex">
                <select class="form-control bg-black text-white" name="repeat_every" id="repeatEvery" required>
                    {% for r in repeat %}
                    {% if expense.repeat_every.id == r.id %}
                        <option value="{{r.id}}" selected>{{r.repeat_every}}</option>
                    {% else %}
                    <option value="{{r.id}}">{{r.repeat_every}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                <a class="btn btn-outline-warning ms-1" role="button" data-target="#newRepeatEvery" data-toggle="modal" id="addRepeatEvery">+</a>
            </div>
            </div>
            </div>

                <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels">Tax Rate</label>
                    <div class="col-md-6 p-3">
                        <select name='taxGST' id="taxGST" class="form-control form-select tax_ref tax_ref_gst text-light bg-black" style="display: block;">
                            <option value="" hidden>Select GST</option>
                            <option value="{{expense.gst_treatment}}" selected  id="gstTreatmentValue" >{{expense.gst_treatment}}</option>
                            <option value="28.0% GST">28.0% GST</option>
                            <option value="18.0% GST">18.0% GST</option>
                            <option value="12.0% GST">12.0% GST</option>
                            <option value="5.0% GST">5.0% GST</option>
                            <option value="3.0% GST">3.0% GST</option>
                            <option value="0.0% GST">0.0% GST</option>
                        </select>
                        <select name='taxIGST' id="taxIGST" class="form-control tax_ref tax_ref_igst text-light bg-black" style="display: none;">
                            <option value=""hidden >Select IGST</option>
                            <option value="{{expense.gst_treatment}}" selected  id="gstTreatmentValue">{{expense.gst_treatment}}</option>
                            <option value="28.0% IGST">28.0% IGST</option>
                            <option value="18.0% IGST">18.0% IGST</option>
                            <option value="12.0% IGST">12.0% IGST</option>
                            <option value="3.0% IGST">5.0% IGST</option>
                            <option value="3.0% IGST">3.0% IGST</option>
                            <option value="0.0% IGST">0.0% IGST</option>
                        </select>
                    </div>
                   
  
                    <script>
                        // Get the GST treatment value
                        var gstTreatmentValueElement = document.getElementById('gstTreatmentValue');
                        var gstTreatmentValue = gstTreatmentValueElement.textContent;
                    
                        // Remove parentheses, commas, and single colons
                        gstTreatmentValue = gstTreatmentValue.replace(/[(),:'' \\ ""]/g, '');
                    
                        // Update the value in the HTML
                        gstTreatmentValueElement.textContent = gstTreatmentValue;
                    </script>
  
  
                  </div>

                  <hr class="text-warning">

                  <h4 class="mb-0 text-warning"><b>Vendor Details</b></h4><br>
                  <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels">Select Vendor</label>
                   
                    <div class="col-md-6 p-3 d-flex">
                        <div class="w-100">
                            <div class="p-0 border-0  bg-none position-relative drop-box" style="display: block;border-radius: 15px;border-color: white;border-width:30px ; ">
                                <select name="vendor" id="vendor" class="form-control form-select"  style="background-color: black; color: white;border-radius: 5px;">
                                  <option value="0">Select </option>
                                  {% for  vnd in vendor  %}
                                  {% if expense.vendor.id == vnd.id %}
                                  <option value="{{ vnd.id }}" selected > {{ vnd.title }} {{ vnd.first_name }} {{ vnd.last_name }}</option>
                                  {% else %}
                           
                                  <option value="{{ vnd.id }}" > {{ vnd.title }} {{ vnd.first_name }} {{ vnd.last_name }}</option>
                                  {%endif%}
                                  {% endfor %}
                              </select>
                              </div>
                    </div>
                 &nbsp;&nbsp;   <button type="button" data-toggle="modal" data-target="#newVendor" class="btn btn-outline-warning ml-1" style="height: fit-content;">+</button> 
                  </div>
                  <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels">Email</label>
                    <div class="col-md-6 p-3">
                        <input class="form-control text-light bg-black" type="email" name="vendorEmail" placeholder="Email"  id="vendorEmail" value="{{expense.vendor_mail}}" readonly>
                    </div>
                  </div>
                  
                  <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels">GST Type</label>
                    <div class="col-md-6 p-3">
                        <input type="text" class="form-control text-light bg-black" id="vendorGstType" name="vendor_gst_type" placeholder="GST Treatment" value="{{expense.vendor_gst_type}}" readonly>  
                    </div>
                  </div>
              
                  <div class="row"  >
                    <label for="ifsc" class="col-md-3 p-3 labels" id="vendorGstInDisplay">GSTIN</label>
                    <div class="col-md-6 p-3"  >
                        <input type="text" class="form-control text-light bg-black" id="vendorGstin"  name="vendor_gstin" placeholder="GSTIN" value="{{expense.vendor_gst}}" readonly>  
                    </div>
                </div>
                
                
                  
                  <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels">Place of supply</label>
                    <div class="col-md-6 p-3">
                        <input hidden value="{{company.State}}" id="cmpstate">
                        <select name="source_supply" id="source_supply" class="form-control form-select bg-black text-light">
                            <option value="value" ></option>
                            <option value="{{expense.Vendor_Sourceofsupply}}" selected hidden>{{expense.Vendor_Sourceofsupply}}</option>
                            <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option>
                            <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                            <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> 
                            <option value="volvo">[AS]-Assam</option>
                            <option value="[BR]-Bihar">[BR]-Bihar</option> 
                            <option value="volvo">[CH]-	Chandhigarh</option>
                            <option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                            <option value="[DD]-Daman Diu">[DD]-Daman Diu</option>
                            <option value="volvo">[DL]-	Delhi</option>
                            <option value="[GA]-Goa">[GA]-Goa</option> 
                            <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                            <option value="[HR]-Haryana">[HR]-Haryana</option> 
                            <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                            <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option>
                            <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                            <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                            <option value="[KL]-Kerala">[KL]-Kerala</option>
                            <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                            <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                            <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                            <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                            <option value="[MN]-Manipur">[MN]-Manipur</option>  
                            <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                            <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                            <option value="[NL]-Nagaland">[NL]-Nagaland</option> 
                            <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                            <option value="[OD]-Odisha">[OD]-Odisha</option>
                            <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                            <option value="[PB]-Punjab">[PB]-Punjab.</option>
                            <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                            <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                            <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                            <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                            <option value="[TR]-Tripura">[TR]-Tripura</option>
                            <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                            <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                            <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                            <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                        </select>
                    </div>
                  </div>
            
                  <div class="row" >
                    <label for="ifsc" class="col-md-3 p-3 labels" id="vendorBillAddressLabel" >Billing Address</label>
                    <div class="col-md-6 p-3">
                        <textarea class="form-control" name="vendor_bill_address" id="vendorBillAddress" rows="4" style=" color: white;" readonly>{{expense.vendor_address}}</textarea> 
                    </div>
                  </div>
       

                  
             

                  







                   <hr class="text-warning">
                   <h4 class="mb-0 text-warning"><b>Customer Details</b></h4><br>
                <br>
                <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels">Select Customer</label>
                  
                    <div class="col-md-6 p-3 d-flex">
                     
                            <div class="w-100">
                                <div class="p-0 border-0  bg-none position-relative drop-box" style="display: block;border-radius: 15px;border-color: white;border-width:30px ; ">
                                  <select name="customer" id="customer" class="form-control form-select" required style="background-color: black; color: white;border-radius: 5px;">
                                    <option value="0">Select </option>
                                    {% for cust in customers %}
                            {% if expense.customer.id == cust.id %}
                            <option value="{{ cust.id }}" selected> {{ cust.title }} {{ cust.first_name }} {{ cust.last_name }}</option>
                            {% else %}
                            <option value="{{ cust.id }}"> {{ cust.title }} {{ cust.first_name }} {{ cust.last_name }}</option>
                            {% endif %}
                            {% endfor %}
                                </select>
                                </div>
                            </div>
                          &nbsp; &nbsp; <button type="button" data-toggle="modal" data-target="#newCustomer" class="btn btn-outline-warning ml-1" style="height: fit-content;">+</button>
                        </div>
                  <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels">Email</label>
                    <div class="col-md-6 p-3">
                        <input class="form-control text-light" type="email" name="customerEmail" placeholder="Email" style="color: white;" id="customerEmail" value="{{expense.customeremail}}" readonly>
                    </div>
                  </div>
                  <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels">GST Type</label>
                    <div class="col-md-6 p-3">
                        <input type="text" class="form-control text-light" id="gstType" name="gst_type" placeholder="GST Treatment" value="{{expense.cust_gsttype}}" readonly>
                    </div>
                  </div>
                
                  <div class="row" >
                    <label  for="ifsc" class="col-md-3 p-3 labels" id="gstInDisplay" >GSTIN</label>
                  <div class="col-md-6 p-3" >
                    
                    <input type="text" class="form-control text-light" id="gstin" name="gstin" placeholder="GSTIN" value="{{expense.cust_gst_no}}" readonly>
                </div>
                </div>
             
                  <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels">Place of supply</label>
                    <div class="col-md-6 p-3">
                        <select  id="placeOfSupply" name="place_of_supply" class="form-control form-select bg-black text-light">
                            <option value="" ></option>
                            <option value="{{expense.cust_placeofsupply}}" selected hidden>{{expense.cust_placeofsupply}}</option>
                            <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option>
                            <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                            <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> 
                            <option value="volvo">[AS]-Assam</option>
                            <option value="[BR]-Bihar">[BR]-Bihar</option> 
                            <option value="volvo">[CH]-	Chandhigarh</option>
                            <option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                            <option value="[DD]-Daman Diu">[DD]-Daman Diu</option>
                            <option value="volvo">[DL]-	Delhi</option>
                            <option value="[GA]-Goa">[GA]-Goa</option> 
                            <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                            <option value="[HR]-Haryana">[HR]-Haryana</option> 
                            <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                            <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option>
                            <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                            <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                            <option value="[KL]-Kerala">[KL]-Kerala</option>
                            <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                            <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                            <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                            <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                            <option value="[MN]-Manipur">[MN]-Manipur</option>  
                            <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                            <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                            <option value="[NL]-Nagaland">[NL]-Nagaland</option> 
                            <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                            <option value="[OD]-Odisha">[OD]-Odisha</option>
                            <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                            <option value="[PB]-Punjab">[PB]-Punjab.</option>
                            <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                            <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                            <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                            <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                            <option value="[TR]-Tripura">[TR]-Tripura</option>
                            <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                            <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                            <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                            <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                        </select>
                    </div>
                  </div>
              
                  <div class="row">
                    <label for="ifsc" class="col-md-3 p-3 labels" id="billAddressLabel">Billing Address</label>
                    <div class="col-md-6 p-3">
                        <textarea class="form-control" name="bill_address" id="billAddress" rows="4" style="color: white;" value="{{expense.cust_address}}" readonly>{{expense.cust_address}}</textarea>
                    </div>
                  </div>
           
                      <br>
                   <div class="row">
                    <div class="col-md-7">
                        <textarea class="form-control mt-3"  id="" name="note" placeholder="Note" style="height: 190px;">{{expense.notes}}</textarea>
                        <label for="file-upload" class="btn text-white border-0"
                        style="background-color: rgb(210, 132, 30);">
                        <i class="fas fa-upload text-white"></i> Upload File
                    </label>
                    <br>
                    <input class="pb-3"  id="file-upload" type="file" name="file"  style="display:none;">
                  </div>  


                   </div>

            


                   <br><br>


                   <hr class="text-warning">
                

                </div>
                </div>
                </div>
                <input type="submit" class="btn save_btn mt-2 my-4 mx-2" style="background-color:chocolate; color: white;" name="Save" value="Save" id="save">
                <input type="submit" class="btn draft_btn mt-2 my-4 mx-2" style="background-color:chocolate; color: white;" name="Draft" value="Draft" id="draft">
               
                <input class="btn save_btn my-4 mt-2" style="background-color: chocolate; color: white;" type="reset" value="CANCEL" id="reset">
              </form>
            </div>
          </div>
      </div>
  </div>
</div> 
<div class="modal fade" id="newRepeatEvery">
    <div class="modal-dialog modal-md">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
        <div class="modal-header px-3" style="background: rgb(32, 35, 37);">
            <h3 class="text-uppercase" style="color: white;">Add Repeat Every</h3>
            <button type="button" class="close btn btn-danger" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" style="background: rgb(32, 35, 37);">
        <div class="card px-2 py-4" style="background-color: #141414a2;">
            <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="newRepeatEveryForm">
              {% csrf_token %}
  
              <div class="row mt-2">
                <div class="col-6">
                    <label class="text-white" for="name">Duration*</label>
                    <input type="number" name="repeat_duration" min="0" step="any" id="repeatEveryDuration" class="form-control text-dark bg-light w-100">
                </div>
                <div class="col-6">
                    <label class="text-white" for="name">Type*</label>
                    <select name="repeat_type" id="repeatEveryType" class="form-control text-dark bg-light w-100">
                        <option value="Month">Month</option>
                        <option value="Year">Year</option>
                    </select>
                </div>
            </div>
            
                  <div class="row mt-5">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                      <div class="d-flex">
                        <button class="btn save_btn rounded-pill text-grey w-50 my-1 mx-1 btn-outline-warning "
                        type="submit" data-dismiss="modal" id="saveRepeatEvery">Save
                        </button> 
                        
  
                        <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-1 mx-1 btn-outline-warning" 
                        data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">Cancel</span>
                        </button>
                      </div>
                    </div>
                </div>
              </form>
            </div>
          </div>
        </div>
    </div>  
  </div>
  <script>
    $(document).on("click","#saveRepeatEvery",function(){
        var duration = $('#repeatEveryDuration').val();
        var type = $("#repeatEveryType").val();
        if (! isNaN(duration) && type !=""){
            $.ajax({
                type : 'POST',
                url:"{% url 'newRepeatEveryrec' %}",
                data:{
                    'duration' : duration,
                    'type' : type,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                
                success: function(response) {
                    if(response.status){
                        document.getElementById("newRepeatEveryForm").reset();
                        
                        var dropdown = $('#repeatEvery');
                        dropdown.empty();
                        dropdown.append(`<option value=""> Select Repeat Duration</option>`);
                        $.each(response, function(key, value) {
                            for(let i=0; i<value.length; i++){
                                if(value[i].repeat_every == (duration+" "+type).toString()){
                                    dropdown.append($('<option selected></option>').text(value[i].repeat_every).val(value[i].id))
                                }else{
                                    dropdown.append($('<option></option>').text(value[i].repeat_every).val(value[i].id))
                                }   
                            }
                        });
                    }else{
                        alert("Something went wrong.!")
                    }
                },         
            });
        }
        else{
            alert('Invalid.!')
        }
    });

  </script>


 <!-- New Account Modal -->

<div class="modal fade" id="newAccount">
    <div class="modal-dialog modal-xl">
      <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
        <div class="modal-header" style="background: rgb(32, 35, 37);">
          <h5 class="m-3 text-uppercase" id="shareBillEmailLabel" style="color: #eeeaea;"><b>New Account</b></h5>
          <button type="button" class=" btn close" style="width: 30px;" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body" style="background: rgb(32, 35, 37);">
          <div class="card p-3 m-3" style="background-color: #000;">
          
           
              <form method="post"  style="color: #000000;" id="newAccountForm">
                {% csrf_token %}
                {% for m in messages %}
                <p style="color: chocolate;">{{m}}</p>
                {% endfor %}
                  <div class="d-flex align-items-center">
                      <h5 style="font-size: 25px;color: aliceblue;">Create Account</h5>
                    
                  </div>
                  <div id="error-message-container2" style="color: chocolate;"></div>
                  <hr>
                  <div class="row ">
                      <div class="col">
                          <div class="row">
                              <div class="col-sm-4">
                                  <label for="">Account Type:</label>
                              </div>
                              <div class="col-sm-8">
                                  <div class="select-box1" onclick="message()">
                                      <div class="select-option1">
                                          <input type="text" placeholder="select" style="width: 100%;"  id="soValue1" name="account_type"readonly>
                                      </div>
                                      <div class="content1" id="myDropdown1">
                                          <div class="search1">
                                              <input type="text" placeholder="search" id="myInput1" style="color: #000000;" onkeyup="filterFunction1()">
                                          </div>
                                          <ul class="options1" style="color: #000000;">
                                              <div class="opt" style="color: #000000;">
                                                  <span style="font-weight: bold;color: #000;">Assets</span>
                                                  <li style="color: #000000;">Other Assets</li>
                                                  <li>Other Current Assets</li>
                                                  <li>Cash</li>
                                                  <li>Bank</li>
                                                  <li>Fixed Asset</li>
                                                  <li>Stock</li>
                                                  <li>Payment Clearing</li>
                                              </div>
          
                                              <div class="opt">
                                                  <span style="font-weight: bold;color: #000;">Liability</span>
                                                  <li>Other Liability</li>
                                                  <li>Other Current Liability</li>
                                                  <li>Credit Card</li>
                                                  <li>Long Term Liability</li>
                                                  <li>Overseas Tax Payable</li>
                                              </div>
          
                                              <div class="opt">
                                                  <span style="font-weight: bold;color: #000;">Equity</span>
                                                  <li>Equity</li>
                                              </div>
          
                                              <div class="opt">
                                                  <span style="font-weight: bold;color: #000;">Income</span>
                                                  <li>Income</li>
                                                  <li>Other Income</li>
                                              </div>
          
                                              <div class="opt">
                                                  <span style="font-weight: bold;color: #000;">Expense</span>
                                                  <li>Expense</li>
                                                  <li>Cost Of Goods Sold</li>
                                                  <li>Other Expense</li>
                                              </div>
                                          </ul>
          
          
          
                                      </div>
                                  </div>
          
                              </div>
          
                              <script>
                                  const selectBox1 = document.querySelector('.select-box1');
                                  const selectOption1 = document.querySelector('.select-option1');
                                  const optionsList1 = document.querySelectorAll('.options1 li');
                                  const soValue1 = document.querySelector('#soValue1');
          
                                  selectOption1.addEventListener('click', function () {
                                      selectBox1.classList.toggle('active')
                                  })
          
                                  optionsList1.forEach(function (optionsListSingle) {
                                      optionsListSingle.addEventListener('click', function () {
                                          text = this.textContent;
                                          soValue1.value = text;
                                          selectBox1.classList.remove('active')
          
                                      })
                                  })
                              </script>
                          </div>
                          <div id="name" style="display: block;">
                              <div class="row mt-3">
                                  <div class="col-sm-4">
                                      <label for="">Account Name:</label>
                                  </div>
                                  <div class="col-sm-8">
                                      <input type="text" class="form-control text-dark bg-light" name="account_name"
                                          id="account_name" style="width: 100%;" required>
                                  </div>
                              </div>
                          </div>
          
                          <div id="credit" style="display: none;">
                              <div class="row mt-3">
                                  <div class="col-sm-4">
                                      <label for="">Credit Card Name:</label>
                                  </div>
                                  <div class="col-sm-8">
                                      <input type="text" class="form-control text-dark bg-light" style="width: 70%;" name="credit_number"
                                          id="credit_number">
                                  </div>
                              </div>
                          </div>
          
                          <div id="sub_div" style="display: none;">

                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                        
                                <div class="col-sm-8">
                        
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent()"
                                        name="sub_account" id="sub_account">
                        
                                    <label for="">Make this a sub-account</label>
                        
                                </div>
                            </div>
                        </div>

                        <div id="sub_div22" style="display: none;">

                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                        
                                <div class="col-sm-8">
                        
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent22()"
                                        name="sub_account22" id="sub_account22">
                        
                                    <label for="">Make this a sub-account</label>
                        
                                </div>
                            </div>
                        </div>
                        
                        <div id="sub_div33" style="display: none;">
                        
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                        
                                <div class="col-sm-8">
                        
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent33()"
                                        name="sub_account33" id="sub_account33">
                        
                                    <label for="">Make this a sub-account</label>
                        
                                </div>
                            </div>
                        </div>
                        
                        <div id="sub_div44" style="display: none;">
                        
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                        
                                <div class="col-sm-8">
                        
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent44()"
                                        name="sub_account44" id="sub_account44">
                        
                                    <label for="">Make this a sub-account</label>
                        
                                </div>
                            </div>
                        </div>
                        
                        <div id="sub_div55" style="display: none;">
                        
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                        
                                <div class="col-sm-8">
                        
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent55()"
                                        name="sub_account55" id="sub_account55">
                        
                                    <label for="">Make this a sub-account</label>
                        
                                </div>
                            </div>
                        </div>
                        
                        
                        <div id="sub_div66" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent66()"
                                        name="sub_account66" id="sub_account66">
                                    <label for="">Make this a sub-account</label>
                                </div>
                            </div>
                        </div>
                        
                        
                        
                        <div id="sub_div77" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent77()"
                                        name="sub_account77" id="sub_account77">
                                    <label for="">Make this a sub-account</label>
                                </div>
                            </div>
                        </div>
                        
                        
                        
                        <div id="sub_div88" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent88()"
                                        name="sub_account88" id="sub_account88">
                                    <label for="">Make this a sub-account</label>
                                </div>
                            </div>
                        </div>
                        
                        <div id="sub_div99" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent99()"
                                        name="sub_account99" id="sub_account99">
                                    <label for="">Make this a sub-account</label>
                                </div>
                            </div>
                        </div>
                        
                        <div id="sub_div100" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent100()"
                                        name="sub_account100" id="sub_account100">
                                    <label for="">Make this a sub-account</label>
                                </div>
                            </div>
                        </div>
                        
                        <div id="sub_div111" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent111()"
                                        name="sub_account111" id="sub_account111">
                                    <label for="">Make this a sub-account</label>
                                </div>
                            </div>
                        </div>
                        
                        <div id="sub_div222" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for=""></label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="checkbox" class=" text-dark bg-light" onclick="show_parent222()"
                                        name="sub_account222" id="sub_account222">
                                    <label for="">Make this a sub-account</label>
                                </div>
                            </div>
                        </div>


                        <div id="parent_div" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                        
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account" id="parent_account">
                                        <option value="" class="bg-dark text-light text-center"  disabled>Other Current
                                            Assets
                                        </option>
                                        <option value="" selected></option>
                                        <option value="Advance Tax">Advance Tax</option>
                                        <option value="Employee Advance">Employee Advance</option>
                                        <option value="Prepaid Expenses">Prepaid Expenses</option>
                                        <option value="GST TCS Receivable">GST TCS Receivable</option>
                                        <option value="GST TDS Receivable">GST TCS Receivable</option>
                                        <option value="Input Tax Credits">Input Tax Credits</option>
                                        <option value="Input CGST">&nbsp; &nbsp;&nbsp;Input CGST</option>
                                        <option value="Input IGST"> &nbsp; &nbsp;&nbsp;Input IGST</option>
                                        <option value="Input SGST">&nbsp; &nbsp;&nbsp;Input SGST</option>
                        
                        
                                        <option value="Reverse Charge Tax Input but no due">Reverse Charge Tax Input but no
                                            due
                                        </option>
                                        <option value="Sales to Customers(Cash)">Sales to Customers(Cash)</option>
                        
                        
                                        <option value="TDS Receivable">TDS Receivable</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div id="parent_div22" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                        
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account22"
                                        id="parent_account22">
                                        <option value="" class="bg-dark text-light text-center" disabled>Cash</option>
                                        <option value="" class="bg-dark text-light text-center" selected></option>
                        
                                        <option value="Petty Cash">Petty Cash</option>
                                        <option value="Undeposited Fund">Undeposited Fund</option>
                                        <option value="Cash Account">Cash Account</option>
                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div id="parent_div33" style="display:none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                        
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account33"
                                        id="parent_account33">
                                        <option value="" class="bg-dark text-light text-center" disabled>Fixed Asset
                                        </option>
                                        <option value="" class="bg-dark text-light text-center" selected></option>
                        
                                        <option value="Furniture and Equipment">Furniture and Equipment</option>
                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        
                        
                        <div id="parent_div44" style="display:none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                        
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account44"
                                        id="parent_account44">
                                        <option value="" class="bg-dark text-light text-center" disabled>Stock</option>
                                        <option value="" class="bg-dark text-light text-center" selected></option>
                        
                                        <option value="Inventory Asset">Inventory Asset</option>
                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div id="parent_div55" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                        
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account55"
                                        id="parent_account55">
                                        <option value="" class="bg-dark text-light text-center" disabled>Other Current
                                            Liability
                                        </option>
                                        <option value="" class="bg-dark text-light text-center" selected></option>
                        
                                        <option value="Employee Reimbursements">Employee Reimbursements</option>
                                        <option value="Opening Balance Adjustments">Opening Balance Adjustments</option>
                                        <option value="Tax Payable">Tax Payable</option>
                                        <option value="Unearned Revenue">Unearned Revenue</option>
                                        <option value="GST Payable">GST Payable</option>
                                        <option value="Output CGST">&nbsp;&nbsp;&nbsp;Output CGST</option>
                                        <option value="Output IGST">&nbsp;&nbsp;&nbsp;Output IGST</option>
                                        <option value="Output SGST">&nbsp;&nbsp;&nbsp;Output SGST</option>
                                        <option value="TDS Payable">TDS Payable</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div id="parent_div66" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account66"
                                        id="parent_account66">
                                        <option value="" class="bg-dark text-light text-center" disabled>Long Term Liability
                                        </option>
                                        <option value="" selected></option>
                                        <option value="Construction Loans">Construction Loans</option>
                                        <option value="Mortgages">Mortgages</option>
                        
                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div id="parent_div77" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account77"
                                        id="parent_account77">
                                        <option value="" class="bg-dark text-light text-center" disabled>Other Liability
                                        </option>
                                        <option value="" selected></option>
                                        <option value="Tag Adjustments">Tag Adjustments</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div id="parent_div88" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                        
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account88"
                                        id="parent_account88">
                                        <option value="" class="bg-dark text-light text-center" disabled>Equity</option>
                                        <option value="" selected></option>
                                        <option value="Drawings">Drawings</option>
                                        <option value="Opening Balance Offset">Opening Balance Offset</option>
                                        <option value="Owner's Equity">Owner's Equity</option>
                                        <option value="Retained Earnings">Retained Earnings</option>
                                        <option value="Capital Stock">Capital Stock</option>
                                        <option value="Distributions">Distributions</option>
                                        <option value="Dividends Paid">Dividends Paid</option>
                                        <option value="Investments">Investments</option>
                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div id="parent_div99" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account99"
                                        id="parent_account99">
                                        <option value="" class="bg-dark text-light text-center" disabled>Income</option>
                                        <option value="" selected></option>
                                        <option value="Discount">Discount</option>
                                        <option value="General Income">General Income</option>
                                        <option value="Interest Income">Interest Income</option>
                                        <option value="Late Fee Income">Late Fee Income</option>
                                        <option value="Other Charges">Other Charges</option>
                                        <option value="sales">sales</option>
                                        <option value="Shipping Charge">Shipping Charge</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        
                        
                        <div id="parent_div100" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account100"
                                        id="parent_account100">
                                        <option value="" class="bg-dark text-light text-center" disabled>Expense</option>
                                        <option value="" selected></option>
                                        <option value="Discount">Discount</option>
                                        <option value="Advertising and Marketing">Advertising and Marketing</option>
                                        <option value="Automobile Expense">Automobile Expense</option>
                                        <option value="Bad Debt">Bad Debt</option>
                                        <option value="Bank Fees and Charges">Bank Fees and Charges</option>
                                        <option value="Consultant Expense">Consultant Expense</option>
                                        <option value="Credit Card Charges">Credit Card Charges</option>
                                        <option value="Depreciation Expense">Depreciation Expense</option>
                                        <option value="IT and Internet Expenses">IT and Internet Expenses</option>
                                        <option value="Ganitorial Expense">Ganitorial Expense</option>
                                        <option value="Lodging">Lodging</option>
                                        <option value="Meals and Entertainment">Meals and Entertainment</option>
                                        <option value="Office Supplies">Office Supplies</option>
                                        <option value="Other Expenses">Other Expenses</option>
                                        <option value="Postage">Postage</option>
                                        <option value="Printing and Stationery">Printing and Stationery</option>
                                        <option value="Rent Expense">Rent Expense</option>
                                        <option value="Repairs and Maintenance">Repairs and Maintenance</option>
                                        <option value="Salaries and Employee Wages">Salaries and Employee Wages</option>
                                        <option value="Telephone Expense">Telephone Expense</option>
                                        <option value="Travel Expense">Travel Expense</option>
                                        <option value="Uncategorized">Uncategorized</option>
                                        <option value="Contract Assets">Contract Assets</option>
                                        <option value="Depreciation And Amortisation">Depreciation And Amortisation</option>
                                        <option value="Merchandise">Merchandise</option>
                                        <option value="Raw Materials And Consumables">Raw Materials And Consumables</option>
                                        <option value="Transportation Expense">Uncategorized</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        
                        
                        <div id="parent_div111" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                        
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account111"
                                        id="parent_account111">
                                        <option value="" class="bg-dark text-light text-center" disabled>Cost Of Goods Sold
                                        </option>
                                        <option value="" selected></option>
                                        <option value="Cost Of Goods Sold">Cost Of Goods Sold</option>
                                        <option value="Job Costing">Job Costing</option>
                                        <option value="Labor">Labor</option>
                                        <option value="Materials">Materials</option>
                                        <option value="Subcontractor">Subcontractor</option>
                        
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        
                        <div id="parent_div222" style="display: none;">
                            <div class="row mt-3">
                                <div class="col-sm-4">
                                    <label for="">Parent Account:</label>
                                </div>
                                <div class="col-sm-8">
                        
                                    <select class="form-control text-dark bg-light" style="width: 70%;" name="parent_account222"
                                        id="parent_account222">
                                        <option value="" class="bg-dark text-light text-center" disabled>Other Expense
                                        </option>
                                        <option value="" selected></option>
                                        <option value="Cost Of Goods Sold">Exchange Gain or Loss</option>
                        
                                    </select>
                                </div>
                            </div>
                        </div>
          
          
          
                          <div class="row mt-3">
                              <div class="col-sm-4">
                                  <label for="">Account Code:</label>
                              </div>
                              <div class="col-sm-8">
                                  <input type="text" class="form-control text-dark bg-light" name="account_code"
                                      id="account_code" style="width: 100%;">
                              </div>
                          </div>
                          <div style="display: none;" id="acc_bo_div">
                              <div class="row mt-3">
                                  <div class="col-sm-4">
                                      <label for="">Account Number:</label>
                                  </div>
                                  <div class="col-sm-8">
                                      <input type="text" class="form-control text-dark bg-light" name="account_number"
                                          id="account_number" style="width: 100%;">
                                  </div>
                              </div>
                          </div>
          
                          <div style="display: none;" id="cr_div">
                              <div class="row mt-3">
                                  <div class="col-sm-4">
                                      <label for="">Currency:</label>
                                  </div>
                                  <div class="col-sm-8">
                                      <input type="text" class="form-control text-dark bg-light" name="currency" id="currency" style="width: 100%;">
                                  </div>
                              </div>
                          </div>
                          <div class="row mt-3">
                              <div class="col-sm-4">
                                  <label for="">Description:</label>
                              </div>
                              <div class="col-sm-8">
                                  <textarea name="description" class="form-control text-dark bg-light" id="description"
                                      placeholder="Max. 500 characters" style="width: 100%;"></textarea>
                              </div>
                          </div>
          
                      </div>
          
                      <div class="col-sm">
                          <div class="alert alert-warning alert-dismissible fade show" style="width: 50%;" >
                              <span id="message_hd" style="color: #000000;">Assets</span> <br>
                              <span id="message" style="color: #000000;">Track special assets like goodwill and other intangible assets</span>
                              <button type="button" class="btn-close" data-bs-dismiss="alert" title="Close"></button>

                          </div>
                      </div>
                  </div>
                  <div class="row mt-5">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="d-flex justify-content-center">
                        <button class="btn save_btn rounded-pill text-grey w-25 my-1 mx-1 btn-outline-warning" type="button" id="newAccountSave">Save</button>
                        <button type="button" class="close btn save_btn rounded-pill text-grey w-25 my-1 mx-1 btn-outline-warning close_account_modal" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Cancel</span></button>
                    </div>
                    </div>
                </div>
        </div>
      </div>
    </div>
  </div>
</div>




<!-- New Customer Modal -->
<div class="modal fade" id="newCustomer">
    <div class="modal-dialog modal-xl">
      <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
        <div class="modal-header px-3" style="background: rgb(32, 35, 37);">
            <h3 class="text-uppercase" style="color: white;">Add Customer</h3>
            <button type="button" class="close btn " data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" style="background: rgb(32, 35, 37);">
          <div class="card px-2 py-4" style="background-color: #000;">
            <form  method="post"  id="addCustomer">
              {% csrf_token %}
              <div class="form-group row mt-3">
                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color: white;">Customer Type</label>
                
                <div class=" col-sm-12 col-md-3 col-lg-3">
                    <input type="radio"  value="Business" name="type" >
                    <label for="Business"> Business</label>
                    &nbsp;&nbsp;&nbsp;
                    <input  type="radio"  value="Individual" name="type" >
                    <label for="Business">Individual</label>
                </div>
              </div>
  
              <div class=" form-group row">
                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                    <label class="labels">Primary Contact*</label>
                </div>
                <div class="col-sm-12 col-md-1 col-lg-1" >
                    <select id="select1"  name="salutation" class="form-control bg-light text-dark mt-2 " >
                    
                        <option value="Mr">Mr</option>
                        <option value="Mrs">Mrs</option>
                        <option value="Ms">Ms</option>
                        <option value="Dr">Dr</option>
  
                    </select> 
                </div>
                <div class="col-sm-12 col-md-2 col-lg-3" >
                    <input  type="text" class="form-control bg-light text-dark mt-2 change-disply " id="fname" name="first_name" placeholder="first name" required >
  
                </div>
                <div class="col-sm-12 col-md-2 col-lg-3" >
                    <input type="text" class="form-control bg-light text-dark mt-2 " id="lname" name="last_name" placeholder="last name" required >
                </div>
              </div>
              <div class="form-group row mt-4">
                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label class="labels">Customer Display Name</label></div>
                <div class="col-sm-12 col-md-6 col-lg-7">
                    <select class="form-control bg-light text-dark "  name="v_display_name" id="v_display_name">
                    </select> 
                </div>
            </div>
            <div class="form-group row mt-4">
                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                    <label class="labels">Company Name</label>
                </div>
                <div class="col-sm-12 col-md-6 col-lg-7">
                    <input  type="text" class="form-control bg-light text-dark " id="companyName" name="company_name" required>     
                    <div class="invalid-feedback">Please fill out this field.</div>   
                </div>
            </div>
            <div class="form-group row mt-4">
                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label class="labels">Customer Email*</label></div>
                <div class="col-sm-12 col-md-6 col-lg-7">
                    <input  type="email" class="form-control bg-light text-dark" name="vendor_email"  id="vendor-email"  required> 
                    <span class=" text-danger mt-1" id="email-message-id" style="font-size: 10px;"></span>   
                </div>
            </div>
  
            <div class="form-group row mt-4">
                <div class="col-sm-12 col-md-3 col-lg-3 ">
                    <label class="col-form-label text-white">Customer phone*</label>
                </div>
                <div class="col-sm-12 col-md-3 col-lg-3">
                    <input id="workphone"  type="text" class="form-control bg-light text-dark mt-2" pattern="[0-9]{7}"  name="w_phone" placeholder="work phone" required>
                    <span id="work-phone-message" class="mt-2 " style="font-size: 10px;"></span >
                    <span id="workphone_label" class="mt-2 text-danger" style="font-size: 10px;"></span >
                    <div class="invalid-feedback"></div>   
                </div>
                <div class=" col-sm-12 col-md-3 col-lg-4">
                    <input id="mphone"  type="text" pattern="[0-9]{10}" class="form-control bg-light text-dark mt-2"  name="m_phone" placeholder="mobile number" required>
                    <span id="phone-message" class="mt-2 " style="font-size: 10px;"></span >
                    <span id="mphone_label" class="mt-2 text-danger" style="font-size: 10px;"></span >
                    <div class="invalid-feedback"></div>
                </div>
  
                <hr style="border: none; height: 2px; background-color: #ffcc00; margin: 20px 0;">
  
                <div class="toggle1 section-toggle">
                    <a href="">Add More Details</a>
                </div>
              </div>
  
              <fieldset1 id="more_detail" class="more details" style="display: none;">
                <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                      <label>Skype name/Number</label>
                  </div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                      <input  type="text" class="form-control bg-light text-dark" id="skypeNumber" name="skype_number">      
                  </div>
                </div>
  
                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                        <label>Designation</label>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-6">
                        <input  type="text" id="design" class="form-control bg-light text-dark" name="designation">      
                    </div>
                </div>
  
                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                        <label>Department</label>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-6">
                        <input  type="text" class="form-control bg-light text-dark" id="dept" name="department">      
                    </div>
                </div>
       
                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                    <div class="col-sm-12 col-md-6 col-lg-6">
                        <input id="web" type="text" class="form-control bg-light text-dark"    name="website">      
                    </div>
                </div>
              </fieldset1>
  
              <hr style="border: none; height: 2px; background-color: #ffcc00; margin: 20px 0;">
  
              <div class="section-3">
  
                  <div class="toggle2 section-toggle"> <a href="" >Other Details </a> </div>
                  <div class="toggle3 section-toggle" > <a href="">Address </a> </div>
                  <div class="toggle4 section-toggle"><a href="" >Contact Persons </a></div>
                  <div class="toggle7 section-toggle"><a href="">Remarks</a></div>
  
              </div>
  
              <fieldset2 class="other details">
                <div class="form-group row mt-2">
                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > GST Treatment*</label>
                    <div class=" col-sm-12 col-md-3 col-lg-3">
                        <select name="gst" id="GSTT" class="form-control bg-light text-dark" onclick="gstPan_function()">
                            <option value="" selected>Select a Gst Treatment</option>
                            <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                            <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">
                                Registered Business-Composition Business that is registered under the Composition schemen in GST
                            </option>
                            <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                            <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                            <option value="Special Economic Zone">Special Economic Zone</option>
                        </select><br>
                    </div>
                </div>
  
                <fieldset3 id="gst" style="display: none;">
                    <div class="row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"  > GSTIN/UIN*</label>
                        
                        <div class=" col-sm-12 col-md-3 col-lg-3">
                            <input type="text" class="form-control bg-light text-dark" name="gst_number" id="gstInput" > 
                            <span id="gstMessage"></span>       
                        </div>
                    </div>
  
                </fieldset3>
  
                <fieldset4 id="pan" style="display: none;">
                  <div class=" row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > PAN*</label>
                      
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <input type="text" class="form-control bg-light text-dark"  id="panInput"  name="pan_number">  
                          <span id="panMessage"></span>    
                      </div>
                  </div>
                </fieldset4>
  
  
                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Source of Supply*</label>
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <select name="source_supply" id="PLACE" class="form-control bg-light text-dark">
                          <option value="value" selected></option>
                          <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option>
                          <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                          <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> 
                          <option value="[AS]-Assam">[AS]-Assam</option>
                          <option value="[BR]-Bihar">[BR]-Bihar</option> 
                          <option value="[CH]-Chandhigarh">[CH]-Chandhigarh</option>
                          <option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                          <option value="[DD]-Daman Diu">[DD]-Daman Diu</option>
                          <option value="[DL]-Delhi">[DL]-Delhi</option>
                          <option value="[GA]-Goa">[GA]-Goa</option> 
                          <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                          <option value="[HR]-Haryana">[HR]-Haryana</option> 
                          <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                          <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option>
                          <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                          <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                          <option value="[KL]-Kerala">[KL]-Kerala</option>
                          <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                          <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                          <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                          <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                          <option value="[MN]-Manipur">[MN]-Manipur</option>  
                          <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                          <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                          <option value="[NL]-Nagaland">[NL]-Nagaland</option> 
                          <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                          <option value="[OD]-Odisha">[OD]-Odisha</option>
                          <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                          <option value="[PB]-Punjab">[PB]-Punjab.</option>
                          <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                          <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                          <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                          <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                          <option value="[TR]-Tripura">[TR]-Tripura</option>
                          <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                          <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                          <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                          <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                      </select>
                  </div>
                </div>
  
                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;">Tax Preference*</label>
                    
                  <div class="col-sm-12 col-md-3 col-lg-4 d-flex align-items-center">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="tax1" id="Taxable" value="Taxable" required>
                        <label class="form-check-label text-white" for="vehicle1">Taxable</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="tax1" id="Tax_Exempt" value="Tax Exempt" required>
                        <label class="form-check-label text-white" for="vehicle2">Tax Exempt</label>
                    </div>
                  </div>
                </div>
                
                <div class="form-group row mt-4">
                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Currency</label>
                    
                    <div class=" col-sm-12 col-md-3 col-lg-3">
                        <select name="currency" id="crncy" class="form-control bg-light text-dark">
                            <option value="Indian Rupee" selected>Indian Rupee</option>
                        </select>
                    </div>
                </div>
  
                <div class="form-group row mt-2">
                  <div class="col-sm-12 col-md-3 col-lg-3 ">
                      <label class="col-form-label text-white mb-3"> Opening Balance Type</label>
                  </div>
                  <div class="col-sm-12 col-md-3 col-lg-4 d-flex align-items-center">
                      <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="op_type" id="debits" value="debit">
                          <label class="form-check-label text-white" for="debit">Debit</label>
                      </div>
                      <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="op_type" id="credits" value="credit">
                          <label class="form-check-label text-white" for="credit">Credit</label>
                      </div>
                  </div>
                </div>
  
                <div class="form-group row mt-4">
                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Opening Balance Amount</label>                    
                    <div class=" col-sm-12 col-md-3 col-lg-3">
                        <input  type="number" class="form-control bg-light text-dark" name="opening_bal" id="opa" value="0.00">      
                    </div>
                </div>
  
                <div class="form-group row mt-4">
                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" >Credit Limit</label>                    
                    <div class=" col-sm-12 col-md-3 col-lg-3">
                        <input  type="number" class="form-control bg-light text-dark" name="credit_lm" id="cl" value="0.00">      
                    </div>
                </div>
            
                <div id="custom-alert" class="customalert">
                    <span class="close-btn">&times;</span>
                    <div class="custom-alert-content">
                      Credit limit should not exceed opening balance amount.
                    </div>
                </div>
                  <style>
                    .customalert {
                            display: none;
                            position: fixed;
                            top: 30%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            background-color: #f44336;
                            color: white;
                            padding: 15px;
                            border-radius: 5px;
                            }
  
                            .close-btn {
                            float: right;
                            cursor: pointer;
                            }
  
                            .custom-alert-content {
                            margin-bottom: 10px;
                            }
                  </style>
                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Payment Terms</label>
                  
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <select name="payment_terms" id="paytearm-select" class="form-control bg-light text-dark">
                          {% for pay_terms in payments %}
                          <option value="{{pay_terms.id}}" >{{pay_terms.term_name}}</option>
                          {% endfor %}
                      </select>
                  </div>
                  <div class="col-md-4 ">
                      <a href="#" class="btn btn-outline-warning py-2 my-1" data-target="#newpayment" data-toggle="modal">+</a>
                  </div>
                </div>
  
                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">Price List </label>
                    
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <select name="plst" id="priceLs" class="form-control bg-light text-dark">
                          <option value="0">Not selected</option>
                          {% for price_list in price_lists %}
                          <option value="{{price_list.id}}">{{price_list.name}}</option>    
                          {% endfor %}
                      </select>
                  </div>
                </div>
             
                <div class="form-group row mt-4">
                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">
                        Portal Language</label>
                        <div class=" col-sm-12 col-md-3 col-lg-3">
                            <select name="plang" id="plang" style="width: 100%;" class="form-control bg-light text-dark">
                                <option selected value="0" >Choose..</option>
                                <option value="ENGLISH">ENGLISH</option>
                              </select>
                    </div>
                </div>   
                <div class="form-group row mt-4">
                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Facebook </label>
                      <div class=" col-sm-12 col-md-3 col-lg-3"> 
                        <input type="text" id="fbk" name="fbk" class="form-control bg-light text-dark" >    
                    </div>
                </div>
                <div class="form-group row mt-4">
                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Twitter</label>
                        <div class=" col-sm-12 col-md-3 col-lg-3">
                            <input type="text" id="twtr" name="twtr" class="form-control bg-light text-dark" >
                          
                    </div>
                </div>
              </fieldset2>
  
              <fieldset5 id="address" style="display: none;">
                <div>
                    <div class="row">
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <div class="row">
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <label for="">BILLING ADDRESS</label>
                                </div>
                                <div class="col"></div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Attention</label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input  type="text" class="form-control bg-light text-dark" name="battention" id="batten">      
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Country</label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <select name="bcountry" id="btry" class="form-control bg-light text-dark">
                                        <option value="India" selected>India</option>
                                    </select>      
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Address</label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <textarea class="form-control bg-light " style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4" name="baddress" id="badd1"></textarea>
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > City</label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input  type="text" class="form-control bg-light text-dark" name="bcity" id="bcty">      
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > State</label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input type="text" class="form-control bg-light text-dark" name="bstate" id="bste">      
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Zip Code </label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input  type="number" class="form-control bg-light text-dark" name="bzip" id="bzp">      
                                </div>
                            </div>
                        
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Phone </label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input id="bphone_num"  type="tel" pattern="[0-9]{10}" class="form-control bg-light text-dark" name="bphone" >
                                    <label for="" id="bphone_label"></label>      
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Fax </label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{7}" onmouseout="fax_number()"  onclick="bphone_number()" name="bfax" id="bfx">  
                                
                                    <label for="" id="fax_label"></label> 
                                </div>
                            </div>
  
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <div class="row">
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <label for="">SHIPPING ADDRESS</label>
                                </div>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <input  type="checkbox" id="myCheckT" onclick="myCopyAddressFunction()">&nbsp;
                                    <label for="myCheck">Same as Billing Address:</label>
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Attention</label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input  type="text" class="form-control bg-light text-dark " style="color: white;" name="sattention" id="satten">      
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Country</label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <select name="s_country" id="sctry" class="form-control bg-light text-dark">
                                        <option value="India" selected>India</option>
                                    </select>      
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Address</label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <textarea class="form-control bg-light" style="border: none;color: rgb(10, 10, 10);" id="sadd1" cols="26" rows="4" name="saddress"></textarea>
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > City</label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input  type="text" class="form-control bg-light text-dark" name="scity" id="scty">      
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > State</label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input type="text" class="form-control bg-light text-dark" name="sstate" id="sste">      
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Zip Code </label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input  type="number" class="form-control bg-light text-dark" name="szip" id="szp">      
                                </div>
                            </div>
                        
  
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Phone </label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{10}" style="color: white;" name="sphone" id="sphone_num">  
                                    <label for="" id="sphone_label"></label>    
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Fax </label>                    
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{7}" style="color: white;" name="sfax" onclick="sphone_number()" onmouseout="sfax_number()" id="sfx"> 
                                    <label for="" id="sfax_label"></label>     
                                </div>
                            </div>
  
                        </div>
                    </div>
                </div>
              </fieldset5>
  
              <fieldset6 id="contact_person" style="display: none;" >
                <div class="row">
                    <div class="col-sm-12 ">
                        
                        <div class="table-responsive">
                        
                            <table id="tbl" class="table text-white" style="background-color: rgba(250, 227, 198, 0.5);">
                                <thead>
                                    <tr>
                                        
                                    <th>Salutation</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Email Address</th>
                                    <th >Work Phone <br><span id="twph_label"></span></th>
                                    <th >Mobile <br><span id="tlabel"></span>    </th>
                                    <th >Skype Name/No</th>
                                    <th >Designation</th>
                                    <th >Department</th>
                                    <th>Action</th>
  
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                <td><select name="salutation[]" class="salutation form-control bg-transparent border-1 text-white" >
                                  <option value="" class="text-dark">Select</option>
                                    <option class="text-dark" value="Mr">Mr.</option>
                                    <option class="text-dark" value="Mrs">Mrs.</option>
                                    <option class="text-dark" value="Ms">Ms.</option>
                                    <option class="text-dark" value="Miss">Miss.</option>
                                    <option class="text-dark" value="Dr">Dr.</option>
                                    </select></td>
                                <td><input type="text" class="first_name form-control border-1 bg-transparent text-white"    name="first_name[]"  ></td>
                                <td><input type="text"class="last_name form-control border-1 bg-transparent text-white"  name="last_name[]" /></td>
                                <td>
                                    <input type="text" class="email form-control border-1 bg-transparent text-white" name="email[]" />
                                    
                                    
                                </td>
                                
                                <td>
                                    <input type="tel" pattern="[0-9]{7}" class="work_phone form-control border-1 bg-transparent text-white"  id="twphone" name="wphone[]"/>
                                   
                                </td>
                                <td>
                                    <input type="tel" pattern="[0-9]{10}"  class="mobile_phone form-control border-1 bg-transparent text-white"  id="tmobile" onclick="sample1()"   name="mobile[]" />
                                    
                                </td>
                                <td><input type="number" class="skype_number form-control border-1 bg-transparent text-white"  onclick="sample()" name="skype[]" /></td>
                                <td><input type="text" class="designation form-control border-1 bg-transparent text-white"  name="designation[]" /></td>
                                <td><input type="text" class="department form-control border-1 bg-transparent text-white"  name="department[]" /></td>
                                <td><button type="button" class="btn btn-danger" onclick="deleteContact(this)">Delete</button></td>
                                </tr>
                            </tbody>
                            </table>
                            
                        </div>
                        
                        <div class="button add_another mt-3 ">
                            <i class="fa fa-user-plus" aria-hidden="true"></i> 
                            <span class="text-small" style="margin-left: 0.30rem;">
                                Add Contact Person
                            </span>
                        </div>
                           
                        
                    </div>
                    
                </div>
  
              </fieldset6>
  
              <!---------------------Contact Person Section End -------------->
  
  
              <!------------------ Remark Section Start------------- -->
  
              <fieldset7 class="remarks" style="display: none;">
                  <div class="row">
                      <div class="col-sm-12 col-md-8 col-lg-8">
                          <div class="form-group row mt-4">
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <textarea class="bg-light w-100" style="border: none;color: rgb(5, 5, 5);" id="rmrk"  rows="5" name="remark"></textarea>
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-12 col-md-2 col-lg-2"></div>
                  </div>
  
              </fieldset7>
            
            
        
              <div class="row mt-5">
                <div class="col-sm-12 col-md-2 col-lg-2 mt-3">
                    <button type="submit" class="btn btn-outline-warning form-control bg-warning text-dark" style="font-weight: bold;" id="newCustomerSave">Save</button>
                   
                </div>
                
                <div class=" col-sm-12 col-md-2 col-lg-2 mt-3">
                    <button type="reset" class="form-control  bg-warning text-dark" style="font-weight: bold;">Cancel</button>
                   
                </div> 


            </div>

          </form>
          </div>
        </div>
      </div>
    </div>  
  </div>
  
  
  <!-- New Customer Payment Term -->
  <div class="modal fade" id="newpayment">
    <div class="modal-dialog modal-md">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
        <div class="modal-header " style="background: rgb(32, 35, 37);">
            <h3 class="m-3 text-uppercase" style="color: white;">Add Payment Term</h3>
            <button type="button" class="close btn btn-danger" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" style="background: rgb(32, 35, 37);">
        <div class="card p-3 m-3" style="background-color: #141414a2;">
            <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalPayment_terms">
            
  
  
            <div class="row mt-2">
  
                <div class="col-lg-12 col-md-12 col-sm-12 mt-2">
                    <label for="termname" style="color: white">Term Name *</label>
  
                <input type="text " class="form-control text-dark bg-light mt-2" id="tname" name="term_name" autocapitalize="characters" required> 
                <span id="message-id" class="mt-1 text-danger" style="font-size: 10px;"></span> 
                <span id="success-message-id" class=" mt-1 text-success" style="font-size: 10px;"></span>    
                </div>
  
                <div class="col-lg-12 col-md-12 col-sm-12 mt-2">
                    <label for="termdays" style="color: white">Number of Days *</label>
  
                <input type="number" class="form-control text-dark bg-light mt-2" id="tdays" name="term_days" autocapitalize="characters" required>
                </div>
                <div class="col-md-2 mt-2"></div>
  
            </div>
            
            <div class="row mt-5">
                <div class="col-lg-12 col-md-12 col-sm-12">
                <div class="d-flex">
                    <button class="btn save_btn rounded-pill text-grey w-50 my-1 mx-1 btn-outline-warning "
                    type="submit" data-dismiss="modal" id="customerPaymentTermSave">Save
                    </button> 
                    
  
                    <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-1 mx-1 btn-outline-warning" 
                    data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Cancel</span>
                    </button>
                </div>
                </div>
            </div>
            </form>
        </div>
        </div>
    </div>
    </div>  
  </div>

  
  


<script>
    function deleteContact(button) {
        var row = button.parentNode.parentNode;
        row.parentNode.removeChild(row);
    }
  
    document.querySelector('.add_another').addEventListener('click', function() {
        var table = document.getElementById('tbl').getElementsByTagName('tbody')[1];
        var newRow = table.insertRow(table.rows.length);
  
        for (var i = 1; i < 9; i++) {
            var cell = newRow.insertCell(i);
            cell.innerHTML = '<input type="text" class="form-control border-1 bg-transparent text-white" name="dynamic[]">';
        }
  
        var deleteCell = newRow.insertCell(9);
        deleteCell.innerHTML = '<button type="button" class="btn btn-danger" onclick="deleteContact(this)">Delete</button>';
    });
  
   
  
    $(document).ready(function() {
    // Attach event listener to input fields
    $('#opa, #cl').on('input', function() {
        // Get values of the input fields
        var openingBal = parseFloat($('#opa').val());
        var creditLimit = parseFloat($('#cl').val());
  
        // Check if credit limit is greater than opening balance amount
        if (creditLimit > openingBal) {
            // Show custom alert
            $('#custom-alert').fadeIn();
  
            // Clear the value of #cl
            $('#cl').val('');
        }
    });
  
    // Close custom alert when close button is clicked
    $('.close-btn').on('click', function() {
        $('#custom-alert').fadeOut();
    });
  });
  
  
    $(document).ready(function(){
  
    // Get the CSRF token from the cookie
        function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
        }
        var csrftoken = getCookie('csrftoken');
  
        // Pan Number Check
  
        $('#panInput').on('input', function(){
        var panNumber = $(this).val();
        var regex = /[A-Z]{5}[0-9]{4}[A-Z]{1}$/;
        if(regex.test(panNumber)) {
            $('#panMessage').text('PAN number is valid.').css('color', 'green');
            // PAN number is valid, call AJAX to check if it exists
            $.ajax({
            url: "{% url 'customer_check_pan' %}",
            headers: {'X-CSRFToken': csrftoken}, 
            type: 'POST',
            data: {panNumber: panNumber},
            success: function(response) {
                if (response.status == 'exists') {
                    $('#panMessage').text('PAN number already exists.').css({
                        'color': 'red',
                        'font-size': '12px'
                    });
                    
                }
            }
            });
        } else {
            $('#panMessage').text('Please enter a valid PAN number.').css({
                'color': 'red',
                'font-size': '12px'
            });
        }
        });
  
        // Pna Number Check End 
  
  
        // GST Number Check 
  
        $('#gstInput').on('input', function(){
            var gstNumber = $(this).val();
            var regex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
            if(regex.test(gstNumber)) {
                $('#gstMessage').text('GST number is valid.').css('color', 'green');
                // GST number is valid, call AJAX to check if it exists
                $.ajax({
                    url: "{% url 'customer_check_gst' %}",
                    headers: {'X-CSRFToken': csrftoken}, 
                    type: 'POST',
                    data: {gstNumber: gstNumber},
                    success: function(response) {
                        if (response.status == 'exists') {
                            $('#gstMessage').text('GST number already exists.').css({
                                'color': 'red',
                                'font-size': '12px'
                            });
                            
                        }
                    }
                    });
            } 
            else {
                $('#gstMessage').text('Please enter a valid GST number.').css({
                    'color': 'red',
                    'font-size': '12px'
                });
            }
            });
    
        // GST Number Check End 
  
    });
  
      // Name display 
  
        
      const Title = document.getElementById('select1');
  const fname = document.getElementById('fname');
  const laname = document.getElementById('lname');
  const vDisplayName = document.getElementById('v_display_name');
  
  // Listen for input events on the initial input fields
  Title.addEventListener('input', updateOutputFields);
  fname.addEventListener('input', updateOutputFields);
  laname.addEventListener('input', updateOutputFields);
  
  // Function to update the output fields
  function updateOutputFields() {
    const selectedTitle = Title.value;
    const selectedFname = fname.value;
    const selectedLname = laname.value;
  
    // Clear existing options
    vDisplayName.innerHTML = '';
  // Add new options based on input field values
  const option1 = document.createElement('option');
    option1.text = selectedTitle + ' ' + selectedFname + ' ' + selectedLname;
    vDisplayName.add(option1);
  
   
  
    const option2 = document.createElement('option');
    option2.text = selectedFname + ' ' + selectedLname;
    vDisplayName.add(option2);
  
    const option3 = document.createElement('option');
    option3.text = selectedLname + ' ' + selectedFname;
    vDisplayName.add(option3);
  }
  
  
    function gstPan_function(){
        var x=document.getElementById('GSTT').value
        if(x=="Unregistered Business-not Registered under GST")
        {
            document.getElementById("pan").style.display="block";
            document.getElementById("gst").style.display="none";
  
            
        }
        else if((x=="Registered Business-Regular Business that is registered under GST") || (x=="Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x=="Overseas- Persons with who you do import or exports of supplies outside india") || (x=="Special Economic Zone"))
        {
            document.getElementById("gst").style.display="block";
            document.getElementById("pan").style.display="block";
  
  
        }
    
    }
  
  
  
    $(document).ready(function () {
        $(".toggle1").click(function (e) {
          e.preventDefault();
          $("fieldset1").toggle();
        })
      })
      $(document).ready(function () {
        $(".toggle2").click(function (e) {
          e.preventDefault();
         
          $("fieldset2").toggle(); 
          $("fieldset5").hide();
          $("fieldset6").hide();
          $("fieldset7").hide();
  
  
      
        })
      })
  
      $(document).ready(function () {
        $(".toggle3").click(function (e) {
          e.preventDefault();
          $("fieldset5").toggle();
          $("fieldset2").hide();
          $("fieldset6").hide();
          $("fieldset7").hide();
  
        })
      })
      $(document).ready(function () {
        $(".toggle4").click(function (e) {
          e.preventDefault();
          $("fieldset6").toggle();
          $("fieldset2").hide();
          $("fieldset5").hide();
          $("fieldset7").hide();
                
        })
      })
      $(document).ready(function () {
        $(".toggle7").click(function (e) {
          e.preventDefault();
          $("fieldset7").toggle();
          $("fieldset2").hide();
          $("fieldset6").hide();
          $("fieldset5").hide();
         
  
         
        })
      })
  
  
  
    $('document').ready(function () {
        $('.add_another').click(function () {
          $("#tbl").append(`<tr>
            <td>
                <select name="salutation[]" class="salutation form-control bg-transparent border-1 text-white">
                  <option value="" class="text-dark">Select</option>
                    <option value="Mr" class="text-dark">Mr.</option>
                    <option class="text-dark" value="Mrs">Mrs.</option>
                    <option class="text-dark" value="Ms">Ms.</option>
                    <option class="text-dark" value="Miss">Miss.</option>
                    <option class="text-dark" value="Dr">Dr.</option>
                </select>  
            </td>
            <td>
                <input type="text" name="first_name[]" class="first_name form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="text" name="last_name[]" class="last_name form-control border-1 bg-transparent text-white"   value="" />
            </td>
            <td>
                <input type="email" name="email[]" class="email form-control border-1 bg-transparent text-white" value="" />
            </td>
            <td>
                <input type="tel" pattern="[0-9]{7}" id="twphone" name="wphone[]" class="work_phone form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="tel" pattern="[0-9]{10}" id="tmobile" onclick="sample1()" name="mobile[]" class="mobile_phone form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="number" onclick="sample()" name="skype[]" class="skype_number form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="text" name="designation[]" class="designation form-control border-1 bg-transparent text-white" value="" />
            </td>
            <td>
                <input type="text" name="department[]" class="department form-control border-1 bg-transparent text-white" value="" />
            </td>
            <td><button type="button" class="btn btn-danger" onclick="deleteContact(this)">Delete</button></td>
        </tr>`);
        });
      })
  
      function fieldset5_function()
      {
        document.getElementById("address").style.display="block";
      }
  
    
  
    function myCopyAddressFunction() {
        var checkBox = document.getElementById("myCheckT");
        var textatn = document.getElementById("batten");
        var txtcry = document.getElementById("bctry");
        var txtadrs11 = document.getElementById("badd1");
        var txtcty = document.getElementById("bcty");
        var txtstat = document.getElementById("bste");
        var txtzip = document.getElementById("bzp");
        var txtphone = document.getElementById("bphone_num");
        var txtfx = document.getElementById("bfx");
  
        var textatn1 = document.getElementById("satten");
        var txtcry1 = document.getElementById("sctry");
        var txtadrs21 = document.getElementById("sadd1");
        var txtcty1 = document.getElementById("scty");
        var txtstat1 = document.getElementById("sste");
        var txtzip1 = document.getElementById("szp");
        var txtphone1 = document.getElementById("sphone_num");
        var txtfx1 = document.getElementById("sfx");
        if (checkBox.checked == true) {
          textatn1.value = textatn.value;
          txtadrs21.value = txtadrs11.value;
          txtcty1.value = txtcty.value;
          txtstat1.value = txtstat.value;
          txtzip1.value = txtzip.value; 
          txtphone1.value = txtphone.value;
          txtfx1.value = txtfx.value;
          
  
  
  
          
  
        } else {
          txtadrs21.value = "";
          txtcty1.value = "";
          txtstat1.value = "";
          txtzip1.value = "";
          txtphone1.value = "";
          txtfx1.value = "";
          txtcry1.value = "";
          textatn1.value = "";
  
  
        }
      }
  
  
      function open_table()
      {
        document.getElementById("hid").style.display="block";
        
      }
  
  
  
    
  
      function bphone_number()
      {
        var a1=document.getElementById("bphone_num").value;
        var b1=document.getElementById("bphone_label");
        var expr=/^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Invalid Phone Number. Please Enter 10 digit Number";
        }
        else{
            b1.style.color="green";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Valid Phone Number.";
  
        }
      }
  
      function sphone_number()
      {
        var a1=document.getElementById("sphone_num").value;
        var b1=document.getElementById("sphone_label");
        var expr=/^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Invalid Phone Number.";
        }
        else{
            b1.style.color="green";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Valid Phone Number.";
  
        }
      }
  
      function fax_number()
      {
        var a1=document.getElementById("bfx").value;
        var b1=document.getElementById("fax_label");
        var expr=/^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Invalid Fax Number.Please Enter 7 digit Number";
        }
        else{
            b1.style.color="green";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Valid Fax Number.";
  
        }
      }
  
      function sfax_number()
      {
        var a1=document.getElementById("sfx").value;
        var b1=document.getElementById("sfax_label");
        var expr=/^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Invalid Fax Number.";
        }
        else{
            b1.style.color="green";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Valid Fax Number.";
  
        }
      }
  
    
      function sample()
      {
  
        var tbldata = document.getElementById("tbl");
        var total_rows = tbldata.rows.length;
        x=document.getElementById("tbl");
        var a1=x.rows[total_rows-1].cells[5].getElementsByTagName('input')[0].value;
  
        var b1=document.getElementById("tlabel");
  
        b1.innerHTML = "";
  
        var expr=/^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.innerHTML = "Invalid";
            b1.style.fontSize="0.750rem";
        }
        else{
            b1.style.color="green";
            b1.innerHTML = "Valid";
            b1.style.fontSize="0.750rem";
  
        }
  
       
  
      }
  
      function sample1()
      {
  
        var tbldata = document.getElementById("tbl");
        var total_rows = tbldata.rows.length;
        x=document.getElementById("tbl");
        var a1=x.rows[total_rows-1].cells[4].getElementsByTagName('input')[0].value;
  
        var b1=document.getElementById("twph_label");
  
        b1.innerHTML = "";
  
        var expr=/^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.innerHTML = "Invalid";
            b1.style.fontSize="0.750rem";
        }
        else{
            b1.style.color="green";
            b1.innerHTML = "valid";
            b1.style.fontSize="0.750rem";
  
        }
  
  
      }
  
  
  
    function vendor_display()
    {
        var x=document.getElementById("select1").value;
        var y=document.getElementById("fname").value;
        var z=document.getElementById("lname").value;
  
        document.getElementById("select2").innerHTML=x+" "+y+" "+z
    
        
    }
  
  
    // Get the input element
    const inputElement = document.getElementById("tname");
  
    // Add event listener for input event
    inputElement.addEventListener("input", function() {
        // Convert the input value to uppercase
        this.value = this.value.toUpperCase();
    });
  
  
  $(document).ready(function() {
    $('#tname').on('blur', function() {
        
        var termName = $(this).val();
       
        $.ajax({
            type: 'GET',
            url:'{% url "check_customer_term_exist" %}',
            data: {
                term_name: termName
            },
            success: function(response) {
                if (response.exists) {
                  alert('Term already exists !')
                    $('#message-id').text('Term already exists !');
                    $('#success-message-id').text('');
                  
                    $('#tname').val('');
                } else {
                    $('#success-message-id').text('Term name available !');
                    $('#message-id').text('');
                }
                
            },
            error: function(xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });
  });
  
  $('#vendor-email').on('input', function() {
        
    var vendorEmail = $(this).val();
    console.log(vendorEmail)
    $.ajax({
        type: 'GET',
        url:'{% url "check_customer_email_exist" %}',
        data: {
            vendor_email: vendorEmail
        },
        success: function(response) {
            if (response.exists) {
                $('#email-message-id').text('Email id already exists !');
                $('#vendor-email').val('');
            }
            else{
                $('#email-message-id').text('');
            }
            
        },
        error: function(xhr, status, error) {
            console.error('Error:', error);
        }
    });
  });
  
  $('#workphone').on('input', function() {
        
    var wPhone = $(this).val();
    
    $.ajax({
        type: 'GET',
        url:'{% url "check_customer_work_phone_exist" %}',
        data: {
            w_Phone: wPhone
        },
        success: function(response) {
            if (response.exists) {
                $('#workphone_label').text('Work phone number already exists !');
                $('#workphone').val('');
            }
            else{
                $('#workphone_label').text('');
            }
            
        },
        error: function(xhr, status, error) {
            console.error('Error:', error);
        }
    });
  });
  
  
  $('#mphone').on('input', function() {
        
    var mPhone = $(this).val();
    
    $.ajax({
        type: 'GET',
        url:'{% url "check_customer_phonenumber_exist" %}',
        data: {
            m_Phone: mPhone
        },
        success: function(response) {
            if (response.exists) {
                $('#mphone_label').text('Phone number already exists !');
                $('#mphone').val('');
            }
            else{
                $('#mphone_label').text('');
            }
            
        },
        error: function(xhr, status, error) {
            console.error('Error:', error);
        }
    });
  });
  
    // Work Phone Number Validation 
    $(document).ready(function () {
        $('#workphone').on('input', function () {
            var inputVal = $(this).val();
            var expr = /^[0-9]{7}$/;
            if (expr.test(inputVal)) {
                $('#work-phone-message').text('Valid work phone number').css('color', 'green');
            } else {
                $('#work-phone-message').text('Invalid work phone number').css('color', 'red');
            }
        });
    });
  
    // Phone Number Validation
    $(document).ready(function () {
        $('#mphone').on('input', function () {
            var inputVal = $(this).val();
            var expr=/^[0-9]{10}$/;
            if (expr.test(inputVal)) {
                $('#phone-message').text('Valid  phone number').css('color', 'green');
            } else {
                $('#phone-message').text('Invalid  phone number').css('color', 'red');
            }
        });
    });
    
  
       
    
      
  




    $(document).on("click","#customerPaymentTermSave",function(){
   

   $.ajax({
     type : 'POST',
     url:"{% url 'customer_payment_terms_add' %}",
 
     data:{
         name : $("#tname").val(),
         days : $("#tdays").val(),
         
         csrfmiddlewaretoken: '{{ csrf_token }}'
         
       },
     
       success: function(response) {
         $("#tname").val('')
         $("#tdays").val('')
         var paytearmSelect = $('#paytearm-select'); 
           paytearmSelect.empty();  // Clear existing options
           
 
           // Add "Select" option
           paytearmSelect.append('<option value="Due on Receipt" selected>Due on Receipt</option>');
 
           // Add new options based on the Ajax response
           $.each(response.payment_list, function(index, pay_terms) {
             paytearmSelect.append('<option value="' + pay_terms.id + '">' + pay_terms.name + '</option>');
           });
         // reloadPayment();
       },
   });        
 });
</script>

<script>
     $(document).ready(function () {
          $('#customer').selectize({
              sortField: 'value'
          }); 
        });
 
   
 $(document).on("click", "#newCustomerSave", function(event){
      event.preventDefault();
      var type = $('input[name="type"]:checked').val();
      var title = $('#select1').val();
      var fName = $('#fname').val();
      var lName = $('#lname').val();
      var placeSupply = $('#PLACE').val();
      var gstType = $("#GSTT").val();
      var gstIN = $("#gstInput").val();
      var panNo = $("#panInput").val();
      var Email = $("#vendor-email").val();
      var Mob = $("#mphone").val();
      var street = $("#badd1").val();
      var city = $("#bcty").val();
      var state = $("#bste").val();
      var pin = $("#bzp").val();
      var country = $("#btry").val();
      var tax_ref = $('input[name="tax1"]:checked').val();
      var tSalutation = []
      var tFirstName = []
      var tLastName = []
      var tEmail = []
      var tWork = []
      var tMobile = []
      var tSkype = []
      var tDesignation = []
      var tDepartment = []
      console.log(type,title,fName, lName,placeSupply, gstType, gstIN, panNo, Email,Mob,street,city,state,pin,country,tax_ref)
      if(gstType != "" && gstType != "Unregistered Business-not Registered under GST" && gstType != 'Overseas- Persons with who you do import or exports of supplies outside india' && gstIN == ""){
          alert('Fill Enter GSTIN..!')
          return
      }

      $('#tbl tbody tr').each(function(){
        var row = $(this)
        if(row != ""){
            var sal = row.find('.salutation').val();
            var fn = row.find('.first_name').val();
            var ln = row.find('.last_name').val();
            var eml = row.find('.email').val();
            var wrk = row.find('.work_phone').val();
            var mob = row.find('.mobile_phone').val();
            var sky = row.find('.skype_number').val();
            var dep = row.find('.department').val();
            var des = row.find('.designation').val();
            console.log(sal,fn,ln, eml,wrk, mob, sky, dep, des)
            // if(sal == "" && fn == "" && ln == "" && eml == "" && wrk == "" && mob == "" && sky == "" && dep == "" && des == ""){
            //     console.log('No table data')
            // }else{
            //     if(sal == "" || fn == "" || ln == "" || eml == "" || wrk == "" || mob == "" || sky == "" || dep == "" || des == ""){
            //         alert('Fill All Fields of Contact persons table')
            //         return
            //     }
            // }
            tSalutation.push(sal);
            tFirstName.push(fn);
            tLastName.push(ln);
            tEmail.push(eml);
            tWork.push(wrk);
            tMobile.push(mob);
            tSkype.push(sky);
            tDesignation.push(des);
            tDepartment.push(dep);
        }
    })
    var cols = [tSalutation,tFirstName,tLastName,tEmail,tWork,tMobile,tSkype,tDesignation,tDepartment]
    var cntactTableLength = $('#tbl tbody tr').length
    var nullExists = false
    if(cntactTableLength == 1 && tSalutation[0] == "" && tFirstName[0] == "" && tLastName[0] == "" && tEmail[0] == "" && tWork[0] == "" && tMobile[0] == "" && tSkype[0] == "" && tDesignation[0] == "" && tDepartment[0] == ""){
        console.log('No table data')
    }else{
        for(i=0; i<cols.length; i++){
            for(j=0; j<cols[i].length; j++){
                if(cols[i][j] == ''){
                    nullExists = true
                }
            }
        }
        // if(sal == "" || fn == "" || ln == "" || eml == "" || wrk == "" || mob == "" || sky == "" || dep == "" || des == ""){
        //     alert('Fill All Fields of Contact persons table')
        //     return
        // }
    }
    if(nullExists){
        alert('Fill All Fields of Contact persons table')
        return
    }

     
          $.ajax({
              type : 'POST',
              url:"{% url 'createRecurringexpCustomer' %}",
              data:{
                'type': type,
                'salutation' : title,
                'first_name' : fName,
                'last_name' : lName,
                'company_name' : $('#companyName').val(),
                'v_display_name' : $('#v_display_name').val(),
                'vendor_email' : Email,
                'w_phone' : $('#workphone').val(),
                'm_phone' : Mob,
                'skype_number' : $('#skypeNumber').val(),
                'designation' : $('#design').val(),
                'department' : $('#dept').val(),
                'website' : $('#web').val(),
                'gst' : gstType,
                'remark' : $('#rmrk').val(),
                'pan_number' : panNo,
                'gst_number' : gstIN,
                'source_supply' : placeSupply,
                'currency' : $('#crncy').val(),
                'op_type' :
                $('input[name="op_type"]:checked').val(),
                'opening_bal' : $('#opa').val(),
                'payment_terms' : $('#paytearm-select').val(),
                'plst' : $('#priceLs').val(),
                'plang' : $('#plang').val(),
                'fbk' : $('#fbk').val(),
                'twtr' : $('#twtr').val(),
                'tax1' : tax_ref,
                'battention' : $('#batten').val(),
                'bcountry' : country,
                'baddress' : street,
                'bcity' : city,
                'bstate' : state,
                'bzip' : pin,
                'bphone' : $('#bphone_num').val(),
                'bfax' : $('#bfx').val(),
                'sattention' : $('#satten').val(),
                's_country' : $('#sctry').val(),
                'saddress' : $('#sadd1').val(),
                'scity' : $('#scty').val(),
                'sstate' : $('#sste').val(),
                'szip' : $('#szp').val(),
                'sphone' : $('#sphone_num').val(),
                'sfax' : $('#sfx').val(),
                'tsalutation[]' : tSalutation,
                'tfirstName[]' : tFirstName,
                'tlastName[]' : tLastName,
                'tEmail[]' : tEmail,
                'tWorkPhone[]' : tWork,
                'tMobilePhone[]' : tMobile,
                'tSkype[]' : tSkype,
                'tDesignation[]' : tDesignation,
                'tDepartment[]' : tDepartment,
                csrfmiddlewaretoken: '{{ csrf_token }}',
              },
              
              success: function(data) {
                console.log('type:', type);
                console.log('salutation:', title);
                console.log('first_name:', fName);
                console.log('last_name:', lName);
                console.log('company_name:', $('#companyName').val());
                console.log('vendor_email:', Email);
                console.log('w_phone:', $('#workphone').val());
                console.log('m_phone:', Mob);
                console.log('skype_number:', $('#skypeNumber').val());
                console.log('designation:', $('#design').val());
                console.log('department:', $('#dept').val());
                console.log('website:', $('#web').val());
                console.log('gst:', gstType);
                console.log('remark:', $('#rmrk').val());
                console.log('pan_number:', panNo);
                console.log('gst_number:', gstIN);
                console.log('source_supply:', placeSupply);
                console.log('currency:', $('#crncy').val());
                console.log('op_type:', $('input[name="op_type"]:checked').val());
                console.log('opening_bal:', $('#opa').val());
                console.log('payment_terms:', $('#paytearm-select').val());
                console.log('plst:', $('#priceLs').val());
                console.log('plang:', $('#plang').val());
                console.log('fbk:', $('#fbk').val());
                console.log('twtr:', $('#twtr').val());
                console.log('tax1:', tax_ref);
                console.log('battention:', $('#batten').val());
                console.log('bcountry:', country);
                console.log('baddress:', street);
                console.log('bcity:', city);
                console.log('bstate:', state);
                console.log('bzip:', pin);
                console.log('bphone:', $('#bphone_num').val());
                console.log('bfax:', $('#bfx').val());
                console.log('sattention:', $('#satten').val());
                console.log('s_country:', $('#sctry').val());
                console.log('saddress:', $('#sadd1').val());
                console.log('scity:', $('#scty').val());
                console.log('sstate:', $('#sste').val());
                console.log('szip:', $('#szp').val());
                console.log('sphone:', $('#sphone_num').val());
                console.log('sfax:', $('#sfx').val());
                console.log('tsalutation[]:', tSalutation);
                console.log('tfirstName[]:', tFirstName);
                console.log('tlastName[]:', tLastName);
                console.log('tEmail[]:', tEmail);
                console.log('tWorkPhone[]:', tWork);
                console.log('tMobilePhone[]:', tMobile);
                console.log('tSkype[]:', tSkype);
                console.log('tDesignation[]:', tDesignation);
                console.log('tDepartment[]:', tDepartment);
              
                reloadCustomer();
                $('#newCustomer').modal('hide'); 
              },
          });
      
  });


  function reloadCustomer() {
      
      $.ajax({
          url: "{% url 'getrecurringexpCustomers' %}",
          type: "GET",
          dataType: "json",
          data: {},
          csrfmiddlewaretoken: '{{ csrf_token }}',

      success: function(data) {
      
         selectize = $('#customer').selectize()[0].selectize;
            selectize.clearOptions();
          $.each(data, function(key, value) {
              selectize.addOption({value:value[0],text:value[1]+' '+value[2]+' '+value[3]});
            //   selectize.addItem(value[0]); 
          });

      },
      error: function(xhr, status, error) {
          console.error(xhr.responseText);
      }

      });
      //refreshCustomerDetails();

      if ($('#newCustomerPaymentTerm').hasClass('show')){
      $('#newCustomerPaymentTerm').modal('toggle');
      }
      }

</script>  
<script>
  function refreshCustomerDetails() {
    console.log($('#customer').text());
    if ($('#customer').val() != 0) {
        $('#custErr').text('');
        $.ajax({
            type: 'POST',
            url: "{% url 'getRecExpCustomerData' %}",
            data: {
                id: $('#customer').val(),
                csrfmiddlewaretoken: '{{ csrf_token }}',
            },

            success: function (data) {
                console.log('AJAX-Response-->', data);
                document.getElementById('customerEmail').value = data.email;
                var placeOfSupplySelect = document.getElementById('placeOfSupply');
                var newOption = new Option(data.shipState, data.shipState); // Create a new option element
                placeOfSupplySelect.appendChild(newOption); // Append the new option to the select element
                placeOfSupplySelect.value = data.shipState; // Set the value of the select element to the desired value

                document.getElementById('gstType').value = data.gstType;

                var billAddressField = document.getElementById('billAddress');
                var custgstField = document.getElementById('gstin');

                if (data.street ) {
                    billAddressField.value = data.street ;
                    billAddressField.style.display = 'block'; // Show the billing address field
                    document.getElementById('billAddressLabel').style.display = 'block'; // Show the billing address label
                } else {
                    billAddressField.style.display = 'none'; // Hide the billing address field
                    document.getElementById('billAddressLabel').style.display = 'none'; // Hide the billing address label
                }

                if (data.gstNo != 'null') {
                    custgstField.value = data.gstNo ;
                    custgstField.style.display = 'block';

                    document.getElementById('gstInDisplay').style.display = 'block';
                 
                } else {
                    custgstField.value = '' ;
                    custgstField.style.display = 'none';
                    document.getElementById('gstInDisplay').style.display = 'none';
                
                }


            }
        });
    } else {
        document.getElementById('customerEmail').value = "";
        document.getElementById('placeOfSupply').value = "";
        document.getElementById('gstType').value = "";
        document.getElementById('billAddress').value = "";
        document.getElementById('gstin').value = "";

        $('#custErr').text('Select a customer..');
    }
}

$(document).ready(function () {
    $('#customer').on('change', function () {
        refreshCustomerDetails();
    });
});

  
  
</script>  
  

<!--- ACCOUNT SCRIPTS-->
<script>
  $(document).ready(function() {
        $('#myaccount').selectize();
    });


    if ($('#newAccount').hasClass('show')){
        $('#newAccount .close_account_modal').click();
    }
    $(document).on("click","#newAccountSave",function(){
            event.preventDefault();

            var acType = $("#soValue1").val();
            var acName = $("#account_name").val();
            var acCode = $("#account_code").val();
            var acDesc = $("#description").val();
            var accNumber = $('#account_number').val();
            var subAcc, parentAcc;
            if(acType == "" || acName == ""){
                alert('Account Name and Type should be entered.')
                return
            }

            if(acType == 'Bank' && accNumber == ""){
                alert('Please enter account number')
                return
            }

            if($('#sub_account').prop('checked')){
                if($('#parent_account').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    console.log('currentvalue == ',$('#parent_account').val())
                    subAcc = $('#sub_account').val()
                    parentAcc = $('#parent_account').val()
                }
            }else if($('#sub_account22').prop('checked')){

                if($('#parent_account22').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account22').val()
                    parentAcc = $('#parent_account22').val()
                }
            }else if($('#sub_account33').prop('checked')){

                if($('#parent_account33').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account33').val()
                    parentAcc = $('#parent_account33').val()
                }
            }else if($('#sub_account44').prop('checked')){

                if($('#parent_account44').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account44').val()
                    parentAcc = $('#parent_account44').val()
                }
            }else if($('#sub_account55').prop('checked')){

                if($('#parent_account55').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account55').val()
                    parentAcc = $('#parent_account55').val()
                }
            }else if($('#sub_account66').prop('checked')){
                if($('#parent_account66').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account66').val()
                    parentAcc = $('#parent_account66').val()
                }

            }else if($('#sub_account77').prop('checked')){
                if($('#parent_account77').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account77').val()
                    parentAcc = $('#parent_account77').val()
                }

            }else if($('#sub_account88').prop('checked')){
                if($('#sub_account88').prop('checked') && $('#parent_account88').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account88').val()
                    parentAcc = $('#parent_account88').val()
                }

            }else if($('#sub_account99').prop('checked')){
                if($('#parent_account99').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account99').val()
                    parentAcc = $('#parent_account99').val()
                }

            }else if($('#sub_account100').prop('checked')){
                if($('#parent_account100').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account100').val()
                    parentAcc = $('#parent_account100').val()
                }

            }else if($('#sub_account111').prop('checked')){
                if($('#parent_account111').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account111').val()
                    parentAcc = $('#parent_account111').val()
                }

            }else if($('#sub_account222').prop('checked')){
                if($('#parent_account222').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account222').val()
                    parentAcc = $('#parent_account222').val()
                }

            }else{

            }



            console.log(acType, acName, acCode, acDesc)
            console.log('sub', subAcc)
            console.log('parent', parentAcc)

          $.ajax({
            
            type : 'POST',
            url:"{% url 'createRexpenseAccount' %}",
        
            data:{
                
                account_type : acType,
                account_name : acName,
                account_code : acCode,
                description : acDesc,
                account_number : accNumber,
                
                sub_acc : subAcc,
                parent_acc : parentAcc,
         
         
                csrfmiddlewaretoken: '{{ csrf_token }}'
                
              },
              success: function(response) {
            if (response.status) {
              document.getElementById("newAccountForm").reset();
              if($('#newAccount').hasClass('show')){
                    $("#newAccount .close_account_modal").click()
                }
                reloadAccounts(acName)
            } else {
              $("#error-message-container2").text("Account with the same name exists");
            }
          },
      
          });     
        });
        
        
        function reloadAccounts(account) {
            $.ajax({
                url: "{% url 'getRExpenseAccounts' %}",
                type: "GET",
                dataType: "json", 
                data: {},
                
                success: function(data) {
                    var acc = account
                    var setVal = "";
                    var selectize = $('#myaccount').selectize()[0].selectize;
                    selectize.clearOptions();

                    selectize.addOptionGroup('Expense', { label: "Expense" });
                    selectize.addOptionGroup('Cost Of Goods Sold', { label: "Cost Of Goods Sold" });
                    selectize.addOptionGroup('Other Expense', { label: "Other Expense" });

                    $.each(data, function(key, value) {
                        if(account == value[0]){
                            setVal = value[0]
                        }
                        console.log(value[0],value[1])
                        if(value[1] == 'Expense'){
                            selectize.addOption({value:value[0],text:value[0], optgroup: 'Expense'});
                        }else if(value[1] == 'Other Expense'){
                            selectize.addOption({value:value[0],text:value[0], optgroup: 'Other Expense'});
                        }else{

                        }
                    });
                    selectize.refreshOptions();

                    if(setVal != ""){
                        selectize.setValue(setVal);
                    }
            
                },
                error: function(xhr, status, error) {
                console.error(xhr.responseText);
            
                }
            });
        }

        function toggleBankAcc(){
            var vals = document.getElementById('soValue1').value
            var accountNumberField = document.getElementById("acc_bo_div");
            if (vals === "Bank") {
                accountNumberField.style.display = "block";
            } else {
                accountNumberField.style.display = "none";
            }
        }
    function message() {
        toggleBankAcc()

        var vals = document.getElementById('soValue1').value
        console.log(vals)
        if (vals == "Other Assets") {
            document.getElementById('message_hd').innerHTML = "Assets"
            document.getElementById('message').innerHTML = "Track special assets like goodwill and other intangible assets"
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("cr_div").style.display = "none";

        } else if (vals == "Other Current Assets") {
            document.getElementById('message_hd').innerHTML = "Any short term asset that can be converted into cash or cash equivalents easily<ul style='list-style-type: disc;'><li>Prepaid expenses</li><li>Stocks and Mutual Funds</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account").checked = false;
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "block";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";

            $('#message').append(
                `Any short term asset that can be converted into cash or cash equivalents easily 
          <ul><li>Prepaid expenses</li> <li>Stocks and Mutual Funds</li></ul>`
            )

        } else if (vals == "Cash") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of cash and other cash equivalents like petty cash, undeposited funds, etc.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account22").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div22").style.display = "block";
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            $('#message').append(
                `To keep track of cash and other cash equivalents like petty cash, undeposited funds, etc.`
            )

        } else if (vals == "Bank") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of bank accounts like Savings, Checking, and Money Market accounts.";

            document.getElementById('').innerHTML = "Assets"
            document.getElementById('message').innerHTML = ""
            document.getElementById("cr_div").style.display = "block";
            document.getElementById("acc_bo_div").style.display = "block";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            $('#message').append(
                `To keep track of bank accounts like Savings, Checking, and Money Market accounts`
            )

        } else if (vals == "Fixed Asset") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>Any long term investment or an asset that cannot be converted into cash easily like:<ul><li>Land and Buildings</li><li>Plant, Machinery and Equipment</li><li>Computers</li><li>Furniture</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account33").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div33").style.display = "block";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            $('#message').append(
                `Any long term investment or an asset that cannot be converted into cash easily like: 
          <ul><li>Land and Buildings</li> <li>Plant, Machinery and Equipment</li> <li>Computers</li> <li>Furniture</li></ul>`
            )

        } else if (vals == "Stock") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of your inventory assets.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account44").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div44").style.display = "block";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("cr_div").style.display = "none";
            $('#message').append(
                `To keep track of your inventory assets.`
            )

        } else if (vals == "Payment Clearing") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of funds moving in and out via payment processors like Stripe, PayPal, etc.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            $('#message').append(
                `To keep track of funds moving in and out via payment processors like Stripe, PayPal, etc.`
            )

        } else if (vals == "Other Current Liability") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Any short term liability like:<ul><li>Customer Deposits</li><li>Tax Payable</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account55").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "block";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";

            $('#message').append(
                `Any short term liability like:
          <ul><li>Customer Deposits</li> <li>Tax Payable</li></ul>`
            )

        } else if (vals == "Credit Card") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Create a trail of all your credit card transactions by creating a credit card account.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("cr_div").style.display = "block";
            document.getElementById("acc_bo_div").style.display = "none";

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `Create a trail of all your credit card transactions by creating a credit card account`
            )

        } else if (vals == "Long Term Liability") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Liabilities that mature after a minimum period of one year like:<ul><li>Notes Payable</li><li>Debentures</li><li>Long Term Loans</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account66").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("sub_div66").style.display = "block";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            document.getElementById("acc_bo_div").style.display = "none";

            $('#message').append(
                `Liabilities that mature after a minimum period of one year like Notes Payable, Debentures, and Long Term Loans`
            )

        } else if (vals == "Other Liability") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Obligation of an entity arising from past transactions or events which would require repayment.<ul><li>Tax to be paid</li><li>Loan to be Repaid</li><li>Accounts Payable</li> etc.</ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account77").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div77").style.display = "block";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";


            $('#message').append(
                `Obligation of an entity arising from past transactions or events which would require repayment.<ul><li>Tax to be paid</li> <li>Loan to be Repaid</li> <li>Accounts Payable etc</li> </ul>`
            )

        } else if (vals == "Overseas Tax Payable") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Track your taxes in this account if your business sells digital services to foreign customers.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            $('#message').append(
                `Track your taxes in this account if your business sells digital services to foreign customers.`
            )

        } else if (vals == "Equity") {
            document.getElementById('message_hd').innerHTML = "Equity<br><br>Owners or stakeholders interest on the assets of the business after deducting all the liabilities.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account88").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "block";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            document.getElementById("acc_bo_div").style.display = "none";

            $('#message').append(
                `Owners or stakeholders interest on the assets of the business after deducting all the liabilities`
            )

        } else if (vals == "Income") {
            document.getElementById('message_hd').innerHTML = "Income<br><br>Income or Revenue earned from normal business activities like sale of goods and services to customers.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account99").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "block";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            document.getElementById("acc_bo_div").style.display = "none";

            $('#message').append(
                `Income or Revenue earned from normal business activities like sale of goods and services to customers`
            )

        } else if (vals == "Other Income") {
            document.getElementById('message_hd').innerHTML = "Income<br><br>Income or revenue earned from activities not directly related to your business like :<ul><li>Interest Earned</li><li>Dividend Earned</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `Income or revenue earned from activties not directly related to your business like :<ul><li>Interest Earned</li> <li>Dividend Earned</li></ul>`
            )

        } else if (vals == "Expense") {
            document.getElementById('message_hd').innerHTML = "Expense<br><br>Reflects expenses incurred for running normal business operations, such as :<ul><li>Advertisements and Marketing</li><li>Business Travel Expenses</li><li>License Fees</li><li>Utility Expenses</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account100").checked = false;


            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div100").style.display = "block";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `Reflects expenses incurred for running normal business operations, such as :<ul><li>Advertisements and Marketing</li> <li>Business Travel Expenses</li><li>License Fees</li><li>Utility Expenses</li></ul>`
            )

        } else if (vals == "Cost Of Goods Sold") {
            document.getElementById('message_hd').innerHTML = "Expense<br><br>This indicates the direct costs attributable to the production of the goods sold by a company such as:<ul><li>Material and Labor costs</li><li>Cost of obtaining raw materials</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account111").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div111").style.display = "block";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `This indicates the direct costs attributable to the production of the goods sold by a company such as:<ul><li>Material and Labor costs</li> <li>Cost of obtaining raw materials</li></ul>`
            )

        } else if (vals == "Other Expense") {
            document.getElementById('message_hd').innerHTML = "Expense<br><br>Track miscellaneous expenses incurred for activities other than primary business operations or create additional accounts to track default expenses like insurance or contribution towards charity.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account222").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div222").style.display = "block";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";

            $('#message').append(
                `Reflects expenses incurred for activities unrelated to primary business operations like :<ul><li>Bad debts</li> <li>Contributions Towards Charity</li><li>Insurance</li></ul>`
            )

        }




    };

    function filterFunction1() {
        var input, filter, ul, li, a, i, b, j;
        input = document.getElementById("myInput1");
        filter = input.value.toUpperCase();
        div = document.getElementById("myDropdown1");
        a = div.getElementsByClassName('opt');
        // a = div.getElementsByTagName('div');

        b = div.getElementsByTagName('li');

        for (i = 0; i < a.length; i++) {
            txtValue = a[i].textContent || a[i].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                a[i].style.display = "";
            }
            else {
                a[i].style.display = "none";
            }
        }
        for (j = 0; j < b.length; j++) {
            txtValue = b[j].textContent || b[j].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                b[j].style.display = "";
            }
            else {
                b[j].style.display = "none";
            }
        }

    }

    function show_parent() {

var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Other Current Assets") {

    var chk = document.getElementById("sub_account").checked;


    if (chk == true) {
        document.getElementById("parent_div").style.display = "block";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";



    } else {
        document.getElementById("parent_div").style.display = "none";
    }
}
}

function show_parent22() {
var vals = document.getElementById('soValue1').value;
console.log(vals);

if (vals == "Cash") {
    var chk = document.getElementById("sub_account22").checked;
    if (chk == true) {
        document.getElementById("parent_div22").style.display = "block";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    }
    else {
        document.getElementById("parent_div22").style.display = "none";
    }
}

}

function show_parent33() {
var vals = document.getElementById('soValue1').value;
console.log(vals);

if (vals == "Fixed Asset") {
    var chk1 = document.getElementById("sub_account33").checked;
    if (chk1 == true) {
        document.getElementById("parent_div33").style.display = "block";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";

    }
    else {
        document.getElementById("parent_div33").style.display = "none";
    }
}

}

function show_parent44() {

var vals = document.getElementById('soValue1').value;
console.log(vals);

if (vals == "Stock") {
    var chk = document.getElementById("sub_account44").checked
    if (chk == true) {
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div44").style.display = "block";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";

    } else {
        document.getElementById("parent_div44").style.display = "none";
    }
}
}


function show_parent55() {
var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Other Current Liability") {
    var chk = document.getElementById("sub_account55").checked
    if (chk == true) {
        document.getElementById("parent_div55").style.display = "block";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    } else {
        document.getElementById("parent_div55").style.display = "none";
    }
}
}

function show_parent66() {
var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Long Term Liability") {
    var chk = document.getElementById("sub_account66").checked
    if (chk == true) {
        document.getElementById("parent_div66").style.display = "block";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    } else {
        document.getElementById("parent_div66").style.display = "none";
    }
}
}

function show_parent77() {
var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Other Liability") {
    var chk = document.getElementById("sub_account77").checked
    if (chk == true) {
        document.getElementById("parent_div77").style.display = "block";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    } else {
        document.getElementById("parent_div77").style.display = "none";
    }
}
}

function show_parent88() {
var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Equity") {
    var chk = document.getElementById("sub_account88").checked
    if (chk == true) {
        document.getElementById("parent_div88").style.display = "block";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    } else {
        document.getElementById("parent_div88").style.display = "none";
    }
}
}

function show_parent99() {
var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Income") {
    var chk = document.getElementById("sub_account99").checked
    if (chk == true) {
        document.getElementById("parent_div99").style.display = "block";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    } else {
        document.getElementById("parent_div99").style.display = "none";
    }
}
}

function show_parent100() {
var vals = document.getElementById('soValue1').value;
console.log(vals);

if (vals == "Expense") {
    var chk = document.getElementById("sub_account100").checked;
    if (chk == true) {
        document.getElementById("parent_div100").style.display = "block";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";


    } else {
        document.getElementById("parent_div100").style.display = "none";
    }
}
}

function show_parent111() {
var vals = document.getElementById('soValue1').value;
console.log(vals);


if (vals == "Cost Of Goods Sold") {
    var chk = document.getElementById("sub_account111").checked
    if (chk == true) {
        document.getElementById("parent_div111").style.display = "block";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";


    } else {
        document.getElementById("parent_div111").style.display = "none";
    }
}
}

function show_parent222() {
var vals = document.getElementById('soValue1').value;
console.log(vals);

if (vals == "Other Expense") {
    var chk = document.getElementById("sub_account222").checked;
    if (chk == true) {
        document.getElementById("parent_div222").style.display = "block";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";


    } else {
        document.getElementById("parent_div222").style.display = "none";
    }
}
}
</script>

<!--ACCOUNT SCRIPTS END-->







<!----Recurring expense scripts-->




<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    function extractTaxRate(tax) {
        const match = tax.match(/\d+/);

        if (match) {
            return parseInt(match[0], 10);
        }
    }

      function refreshTax(){
        $('#taxGST').prop('required',false);
        $('#taxIGST').prop('required',false);
        var vendPlace = $('#source_supply').val();
        var custPlace = $('#placeOfSupply').val();
        if(vendPlace!= "" && custPlace!=""){
            if(vendPlace === custPlace){
                $('#taxGST').show();
                $('#taxIGST').hide();
                $('#taxGST').prop('required',true);
                $('#taxIGST').prop('required',false);
                $('#taxIGST').val() != "" ? $('#taxGST').val((extractTaxRate($('#taxIGST').val())).toString() + '.0% GST') : true;
            }else{
                $('#taxGST').hide();
                $('#taxIGST').show();
                $('#taxGST').prop('required',false);
                $('#taxIGST').prop('required',true);
                $('#taxGST').val() != "" ? $('#taxIGST').val((extractTaxRate($('#taxGST').val())).toString() + '.0% IGST') : true;
            }
        }
    }
</script>
<script>
    $(document).on('change','#source_supply',function()   {
        refreshTax();
    });

    $(document).on('change','#placeOfSupply',function()   {
        refreshTax();
    });
</script>



<script>
$(document).ready(function() {
        $("#paymentMethod").change(function() {
            var x=$('#paymentMethod').val();
            if(x==='Cash'){
                $('#chequediv').hide()
                $('#bnkdiv').hide()
                $('#upidiv').hide()
                document.getElementById('cheque_id').value=""
                document.getElementById('upi_id').value=""
                document.getElementById('bnk_id').value=""
            }else if(x==='Cheque'){
                $('#chequediv').show()
                $('#bnkdiv').hide()
                $('#upidiv').hide()
                document.getElementById('upi_id').value=""
                document.getElementById('bnk_id').value=""
            }else if(x==='UPI'){
                $('#upidiv').show()
                $('#bnkdiv').hide()
                $('#chequediv').hide()
                document.getElementById('cheque_id').value=""
                document.getElementById('bnk_id').value=""
            }else{
                $('#bnkdiv').show()
                $('#chequediv').hide()
                $('#upidiv').hide()
                document.getElementById('cheque_id').value=""
                document.getElementById('upi_id').value=""

                $.ajax({
                    type: "GET",
                    url: "{%url 'getBankData' %}",
                    data: {
                        id: $('#paymentMethod').find(':selected').attr('text'),
                    },
                    success: function (response) {
                        if (response.status){
                            document.getElementById('cheque_id').value="";
                            document.getElementById('upi_id').value="";
                            document.getElementById("bnk_id").value = response.account;
                        }else{
                            alert(response.message);
                        }
                    }
                });
            }
        });
    });


</script>

<script>
    $(document).ready(function(){
        $('#expenseType').on('change', function(){
            if($(this).val() == 'Goods'){
                $('#sacNoField').hide();
                $('#hsnNoField').show();
                $('#hsnInput').prop('required', true);
                $('#sacInput').prop('required', false);
            }else if($(this).val() == 'Service'){
                $('#hsnNoField').hide();
                $('#sacNoField').show();
                $('#hsnInput').prop('required', false);
                $('#sacInput').prop('required', true);
            }else{
                $('#hsnNoField').hide();
                $('#sacNoField').hide();
                $('#hsnInput').prop('required', false);
                $('#sacInput').prop('required', false);
                alert('Select an Expense Type.!')
            }
        });

        
        // Move the following code inside $(document).ready() function
        $('#expenseType').change(function() {
            if ($(this).val() =='Goods' && $('#hsnErr').text() != ""){
                alert('Invalid HSN')
                return false;
            }

            if ($(this).val() =='Service' && $('#sacErr').text() != ""){
                alert('Invalid SAC')
                return false;
            }
        });
    });
</script>



<!--recurring expense script end -->

<!-- NEW CUSTOMER -> Scripts -->

<!--    vendor modal -->

<div class="modal fade" id="newVendor">
    <div class="modal-dialog modal-xl">
      <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
        <div class="modal-header px-3" style="background: rgb(32, 35, 37);">
            <h3 class="text-uppercase" style="color: white;">Add Vendor</h3>
            <button type="button" class="close btn " data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" style="background: rgb(32, 35, 37);">
          <div class="card px-2 py-4" style="background-color: #000;">
              <h3  class="mb-4 mt-2  " style="font-size: 1.40rem;color: rgb(230, 171, 45);">New Vendor</h3>
              <form  method="post" action=""  enctype="multipart/form-data" class="mb-3" id="newvendorform">
                {% csrf_token %}
        
                <div class=" form-group row">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                        <label>Primary Contact</label>
                    </div>
                    <div class="col-sm-12 col-md-1 col-lg-1" >
                        <select id="salutationss"  name="salutationss" class="form-control bg-light text-dark mt-2 " >
                        
                            <option value="Mr">Mr</option>
                            <option value="Mrs">Mrs</option>
                            <option value="Ms">Ms</option>
                            <option value="Dr">Dr</option>

                        </select> 
                    </div>
                    <div class="col-sm-12 col-md-2 col-lg-3" >
                        <input  type="text" class="form-control bg-light text-dark mt-2 change-disply " id="Fname" name="first_name" placeholder="first name" required >

                    </div>
                    <div class="col-sm-12 col-md-2 col-lg-3" >
                        <input type="text" class="form-control bg-light text-dark mt-2 " id="Lname" name="last_name" placeholder="last name" required >

                    </div>
                </div>

                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                        <label>Company Name</label>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-7">
                        <input  type="text" class="form-control bg-light text-dark " name="company_name" id="com_name" required>     
                        <div class="invalid-feedback">Please fill out this field.</div>   

                    </div>
                </div>

               

                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Vendor Display Name</label></div>
                    <div class="col-sm-12 col-md-6 col-lg-7">
                       
                        <select class="form-control bg-light text-dark "  name="c_display_name" id="c_display_name">
                            
                        </select>
                        
                           
                            
                    </div>
                </div>

                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Vendor Email</label></div>
                    <div class="col-sm-12 col-md-6 col-lg-7">
                        <input  type="email" class="form-control bg-light text-dark" name="cvendor_email"  id="cvendor-email"  required> 
                        <span class=" text-danger mt-1" id="emails-message-ids" style="font-size: 10px;"></span>   
    
                    </div>


                </div>

                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 ">
                        <label class="col-form-label text-white">  Vendor phone</label>
                    </div>
                    <div class="col-sm-12 col-md-3 col-lg-3">
                        <input id="workphones"  type="text" class="form-control bg-light text-dark mt-2" pattern="[0-9]{7}"  name="w_phones" placeholder="work phone" required>
                        <span id="work-phone-messages" class="mt-2 " style="font-size: 10px;"></span >
                        <span id="workphone_labels" class="mt-2 text-danger" style="font-size: 10px;"></span >
                        <div class="invalid-feedback"></div>   
    
                    </div>
                    <div class=" col-sm-12 col-md-3 col-lg-4">
                        <input id="mphones"  type="text" pattern="[0-9]{10}" class="form-control bg-light text-dark mt-2"  name="m_phones" placeholder="mobile number" required>
                        <span id="phone-messages" class="mt-2 " style="font-size: 10px;"></span >
                        <span id="mphone_labels" class="mt-2 text-danger" style="font-size: 10px;"></span >
                        <div class="invalid-feedback"></div>   
    
                    </div>

                    <hr style="border: none; height: 2px; background-color: #ffcc00; margin: 20px 0;">

                    <div class="toggle1 section-toggle">
                        <a href="">More Details</a>

                    </div>


                </div>
                

                <fieldset1 id="more_detail" class="more details" style="display: none;">

                    <div class="form-group row mt-4">
                        <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                            <label>Skype name/Number</label>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <input  type="text" class="form-control bg-light text-dark" name="skype_number" id="skype_numbers">      
                        </div>

                    </div>

                    <div class="form-group row mt-4">
                        <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                            <label>Designation</label>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <input  type="text" class="form-control bg-light text-dark" name="designation" id="des">      
                        </div>

                    </div>

                    <div class="form-group row mt-4">
                        <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                            <label>Department</label>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-6">
                            <input  type="text" class="form-control bg-light text-dark" name="department" id="departs">      
                        </div>

                    </div>


           
                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                    <div class="col-sm-12 col-md-6 col-lg-6">
                        <input id="webs" type="text" class="form-control bg-light text-dark"    name="website">      
                    </div>
                </div>
            </fieldset1>


                <hr style="border: none; height: 2px; background-color: #ffcc00; margin: 20px 0;">

                <div class="section-3">

                    <div class="toggle2 section-toggle"> <a href="" >Other Details </a> </div>
                    <div class="toggle3 section-toggle" > <a href="">Address </a> </div>
                    <div class="toggle4 section-toggle"><a href="" >Contact Persons </a></div>
                    <div class="toggle7 section-toggle"><a href="">Remarks</a></div>

                </div>

               
                <fieldset2 class="other details">

                    <div class="form-group row mt-2">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > GST Treatment*</label>
                        
                        <div class=" col-sm-12 col-md-3 col-lg-3">
                            <select name="gst" id="GSTTT" class="form-control bg-light text-dark" onclick="gstPan_function1()">
                                <option value="Select a Gst Treatment" selected>Select a Gst Treatment</option>
                                <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                                <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">
                                    Registered Business-Composition Business that is registered under the Composition schemen in GST
                                </option>
                                <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                                <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                                <option value="Special Economic Zone">Special Economic Zone</option>
                            </select><br>
                        </div>


                    </div>

                    <fieldset3 id="gst1" style="display: none;">
                        <div class="row mt-4">
                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"  > GSTIN/UIN*</label>
                            
                            <div class=" col-sm-12 col-md-3 col-lg-3">
                                <input type="text" class="form-control bg-light text-dark" name="gst_number" id="gstInput1" > 
                                <span id="gstMessages"></span>       
        
                            </div>
        
        
                        </div>

                    </fieldset3>

                    <fieldset4 id="pan1" style="display: none;">
                        <div class=" row mt-4">
                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > PAN</label>
                            
                            <div class=" col-sm-12 col-md-3 col-lg-3">
                                <input type="text" class="form-control bg-light text-dark"  id="panInput1"  name="pan_number">  
                                <span id="panMessages"></span>    

        
                            </div>
        
        
                        </div>

                    </fieldset4>


                    <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Source Of Supply*</label>
                        
                        <div class=" col-sm-12 col-md-3 col-lg-3">
                            <select name="source_supply" id="PLACES" class="form-control bg-light text-dark">
                                <option value="value" selected></option>
                                <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option>
                                <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                                <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> 
                                <option value="[AS]-Assam">[AS]-Assam</option>
                                <option value="[BR]-Bihar">[BR]-Bihar</option> 
                                <option value="[CH]-Chandhigarh">[CH]-	Chandhigarh</option>
                                <option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                                <option value="[DD]-Daman Diu">[DD]-Daman Diu</option>
                                <option value="[DL]-Delhi">[DL]-	Delhi</option>
                                <option value="[GA]-Goa">[GA]-Goa</option> 
                                <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                                <option value="[HR]-Haryana">[HR]-Haryana</option> 
                                <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                                <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option>
                                <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                                <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                                <option value="[KL]-Kerala">[KL]-Kerala</option>
                                <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                                <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                                <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                                <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                                <option value="[MN]-Manipur">[MN]-Manipur</option>  
                                <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                                <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                                <option value="[NL]-Nagaland">[NL]-Nagaland</option> 
                                <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                <option value="[OD]-Odisha">[OD]-Odisha</option>
                                <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                                <option value="[PB]-Punjab">[PB]-Punjab.</option>
                                <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                                <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                                <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                                <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                                <option value="[TR]-Tripura">[TR]-Tripura</option>
                                <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                                <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                                <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                                <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                            </select>
                        </div>
    
    
                    </div>
                    
                    <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Currency*</label>
                        
                        <div class=" col-sm-12 col-md-3 col-lg-3">
                            <select name="currency" id="curny" class="form-control bg-light text-dark">
                                <option value="Indian Rupee" selected>Indian Rupee</option>
                                <option value="Indian Rupee">Indian Rupee</option>
                    
                            </select>
                        </div>
    
    
                    </div>

                    <div class="form-group row mt-2">
                        <div class="col-sm-12 col-md-3 col-lg-3 ">
                           <label class="col-form-label text-white mb-3"> Opening Balance Type</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-4 d-flex align-items-center">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="op_types" id="debit" value="debit">
                                <label class="form-check-label text-white" for="debit">Debit</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="op_types" id="credit" value="credit">
                                <label class="form-check-label text-white" for="credit">Credit</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Opening Balance Amount</label>                    
                        <div class=" col-sm-12 col-md-3 col-lg-3">
                            <input  type="number" class="form-control bg-light text-dark" name="opening_bal" id="opa" value="0.00">      
                        </div>
                    </div>
                    
                    <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Payment Terms</label>
                        
                        <div class=" col-sm-12 col-md-3 col-lg-3">
                            <select name="payment_terms" id="paytearm-select1" class="form-control bg-light text-dark">
                               
                                {% for pay_terms in payments %}
                                <option value="{{pay_terms.id}}" >{{pay_terms.term_name}}</option>
                                {% endfor %}
                            </select>

                        </div>
    
                        <div class="col-md-4 ">
                            <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment1" data-toggle="modal" style="color: white; background-color: rgb(210, 132, 30);" >+</a>
                        </div>
                    



    
                    </div>

        
                </fieldset2>


                <!------------------ Address Section Start------------- -->

                <fieldset5 id="address" style="display: none;">
                    <div>
                        <div class="row">
                            <div class="col-sm-12 col-md-6 col-lg-6">
                                <div class="row">
                                    <div class="col-sm-12 col-md-6 col-lg-6">
                                        <label for="">BILLING ADDRESS</label>
                                    </div>
                                    <div class="col"></div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Attention</label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input  type="text" class="form-control bg-light text-dark" name="battention" id="batten1">      
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Country</label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <select name="bcountry" id="btry1" class="form-control bg-light text-dark">
                                            <option value="India" selected>India</option>
                                        </select>      
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Address</label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <textarea class="form-control bg-light " style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4" name="baddress" id="badd11"></textarea>
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > City</label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input  type="text" class="form-control bg-light text-dark" name="bcity" id="bcty1">      
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > State</label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input type="text" class="form-control bg-light text-dark" name="bstate" id="bste1">      
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Zip Code </label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input  type="number" class="form-control bg-light text-dark" name="bzip" id="bzp1">      
                                    </div>
                                </div>
                            
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Phone </label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input id="bphone_num1"  type="tel" pattern="[0-9]{10}" class="form-control bg-light text-dark" name="bphone"   >
                                        <label for="" id="bphone_labels"></label>      
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Fax </label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{7}" onclick="bphone_number1()" onmouseout="fax_number1()" name="bfax" id="bfx1">  
                                    
                                        <label for="" id="fax_labels"></label> 
                                    </div>
                                </div>

                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-6">
                                <div class="row">
                                    <div class="col-sm-12 col-md-6 col-lg-6">
                                        <label for="">SHIPPING ADDRESS</label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-6">
                                        <input  type="checkbox" id="myCheckT1" onclick="myCopyAddressFunction1()">&nbsp;
                                        <label for="myCheck">Same as Billing Address:</label>
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Attention</label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input  type="text" class="form-control bg-light text-dark " style="color: white;" name="sattention" id="satten1">      
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Country</label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <select name="s_country" id="sctry1" class="form-control bg-light text-dark">
                                            <option value="India" selected>India</option>
                                        </select>      
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Address</label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <textarea class="form-control bg-light" style="border: none;color: rgb(10, 10, 10);" id="sadd11" cols="26" rows="4" name="saddress"></textarea>
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > City</label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input  type="text" class="form-control bg-light text-dark" name="scity" id="scty1">      
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > State</label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input type="text" class="form-control bg-light text-dark" name="sstate" id="sste1">      
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Zip Code </label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input  type="number" class="form-control bg-light text-dark" name="szip" id="szp1">      
                                    </div>
                                </div>
                            

                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Phone </label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{10}" style="color: white;" name="sphone" id="sphone_num1">  
                                        <label for="" id="sphone_labels"></label>    
                                    </div>
                                </div>
                                <div class="form-group row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white" > Fax </label>                    
                                    <div class=" col-sm-12 col-md-6 col-lg-6">
                                        <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{7}" style="color: white;" name="sfax"  onclick="sphone_number1()"  onmouseout="sfax_number1()" id="sfx1"> 
                                        <label for="" id="sfax_labels"></label>     
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </fieldset5>

                <!---------------------Address  Section End -------------->


                <!------------------ Contact Person Section Start------------- -->

                <fieldset6 id="contact_person" style="display: none;" >
                    <div class="row">
                        <div class="col-sm-12 ">
                            
                            <div class="table-responsive">
                            
                                <table id="tbl1" class="table text-white" style="background-color: rgba(250, 227, 198, 0.5);">
                                    <thead>
                                        <tr>
                                            
                                        <th>Salutation</th>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Email Address</th>
                                        <th >Work Phone <br><span id="twph_labels"></span></th>
                                        <th >Mobile <br><span id="tlabels"></span>    </th>
                                        <th >Skype Name/No</th>
                                        <th >Designation</th>
                                        <th >Department</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                    <td><select name="salutations[]" class="form-control bg-transparent border-1 text-white"  id="SALS" >
                                        <option class="text-dark"  >Select</option>
                                        <option class="text-dark" value="Mr" >Mr.</option>
                                        <option class="text-dark" value="Mrs">Mrs.</option>
                                        <option class="text-dark" value="Ms">Ms.</option>
                                        <option class="text-dark" value="Miss">Miss.</option>
                                        <option class="text-dark" value="Dr">Dr.</option>
                                        </select></td>
                                    <td><input type="text" class=" form-control border-1 bg-transparent text-white"    name="first_names[]" id="first_names" ></td>
                                    <td><input type="text"class="form-control border-1 bg-transparent text-white"  name="last_names[]" id="last_names"></td>
                                    <td>
                                        <input type="text" class="form-control border-1 bg-transparent text-white" name="emails[]" id="emails" />
                                        
                                        
                                    </td>
                                    
                                    <td>
                                        <input type="tel" pattern="[0-9]{7}" class="form-control border-1 bg-transparent text-white"  id="twphones" name="wphones[]"/>
                                       
                                    </td>
                                    <td>
                                        <input type="tel" pattern="[0-9]{10}"  class="form-control border-1 bg-transparent text-white"  id="tmobiles" onclick="sample12()"   name="mobiles[]" />
                                        
                                    </td>
                                    <td><input type="number" class="form-control border-1 bg-transparent text-white"  onclick="sample11()" name="skypes[]" /></td>
                                    <td><input type="text" class="form-control border-1 bg-transparent text-white"  name="designations[]" /></td>
                                    <td><input type="text" class="form-control border-1 bg-transparent text-white"  name="departments[]" /></td>
                                    </tr>
                                </tbody>
                                </table>
                                
                            </div>
                            
                            <div class="button add_another1 mt-3 ">
                                <i class="fa fa-user-plus" aria-hidden="true"></i> 
                                <span class="text-small" style="margin-left: 0.30rem;">
                                    Add Contact Person
                                </span>
                            </div>
                               
                            
                        </div>
                        
                    </div>

                </fieldset6>

                <!---------------------Contact Person Section End -------------->


                <!------------------ Remark Section Start------------- -->

                <fieldset7 class="remarks" style="display: none;">
                    <div class="row">
                        <div class="col-sm-12 col-md-8 col-lg-8">
                            <div class="form-group row mt-4">
                                <div class=" col-sm-12 col-md-6 col-lg-6">
                                    <textarea class="bg-light w-100" style="border: none;color: rgb(5, 5, 5);"   rows="5" name="remarks" id="rmrk"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2"></div>
                    </div>

                </fieldset7>

                <!---------------------Remark Section End -------------->
                
                <div class="row mt-5">
                    <div class="col-sm-12 col-md-2 col-lg-2 mt-3">
                        <button type="submit" class="btn btn-outline-warning form-control bg-warning text-dark" id="newVendorSave" style="font-weight: bold;">Save</button>
                       
                    </div>
                    
                    <div class=" col-sm-12 col-md-2 col-lg-2 mt-3">
                        <button type="reset" class="form-control  bg-warning text-dark close_vendor_modal" style="font-weight: bold;">Cancel</button>
                       
                    </div> 


                </div>

       </form>
    </div>
</div>
</div>
</div>
</div> 
            

            <div class="modal fade" id="newpayment1">
                <div class="modal-dialog modal-md">
                <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
                    <div class="modal-header " style="background: rgb(32, 35, 37);">
                        <h3 class="m-3 text-uppercase" style="color: white;">Add Payment Term</h3>
                        <button type="button" class="close btn btn-danger" data-dismiss="modal" aria-label="Close" >
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" style="background: rgb(32, 35, 37);">
                    <div class="card p-3 m-3" style="background-color: #141414a2;">
                        <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalPayment_terms">
                        
            
            
                        <div class="row mt-2">
            
                            <div class="col-lg-12 col-md-12 col-sm-12 mt-2">
                                <label for="termname" style="color: white">Term Name *</label>

                            <input type="text " class="form-control text-dark bg-light mt-2" id="tnames" name="term_name" autocapitalize="characters" required> 
                            <span id="message-ids" class="mt-1 text-danger" style="font-size: 10px;"></span> 
                            <span id="success-message-ids" class=" mt-1 text-success" style="font-size: 10px;"></span>    
                            </div>
            
                            <div class="col-lg-12 col-md-12 col-sm-12 mt-2">
                                <label for="termdays" style="color: white">Number of Days *</label>

                            <input type="number" class="form-control text-dark bg-light mt-2" id="tdayss" name="term_days" autocapitalize="characters" required>
                            </div>
                            <div class="col-md-2 mt-2"></div>
            
                        </div>
                        
                        <div class="row mt-5">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="d-flex">
                                <button class="btn save_btn rounded-pill text-grey w-50 my-1 mx-1 btn-outline-warning "
                                type="submit" data-dismiss="modal" id="termSaves">Save
                                </button> 
                                
            
                                <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-1 mx-1 btn-outline-warning" 
                                data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">Cancel</span>
                                </button>
                            </div>
                            </div>
                        </div>
                        </form>
                    </div>
                    </div>
                </div>
                </div>  
            </div> 

   
        


<!-- Repeat Every -->


<script>
    
        
const title = document.getElementById('salutationss');
const Fname = document.getElementById('Fname');
const Laname = document.getElementById('Lname');
const cDisplayName = document.getElementById('c_display_name');

// Listen for input events on the initial input fields
title.addEventListener('input', updateOutputFields);
Fname.addEventListener('input', updateOutputFields);
Laname.addEventListener('input', updateOutputFields);

// Function to update the output fields
function updateOutputFields() {
    const selectedTitle = title.value;
    const selectedFname = Fname.value;
    const selectedLname = Laname.value;

    // Clear existing options
    cDisplayName.innerHTML = '';
 // Add new options based on input field values
 const option1 = document.createElement('option');
    option1.text = selectedTitle + ' ' + selectedFname + ' ' + selectedLname;
    cDisplayName.add(option1);

   

    const option2 = document.createElement('option');
    option2.text = selectedFname + ' ' + selectedLname;
    cDisplayName.add(option2);

    const option3 = document.createElement('option');
    option3.text = selectedLname + ' ' + selectedFname;
    cDisplayName.add(option3);
}

</script>
<script>
    
    $('#cvendor-email').on('input', function() {
        
        var vendorEmail = $(this).val();
        console.log(vendorEmail)
        $.ajax({
            type: 'GET',
            url:'{% url "check_vendorreccemail_exist" %}',
            data: {
                vendor_email: vendorEmail
            },
            success: function(response) {
                if (response.exists) {
                    $('#emails-message-ids').text('Email id already exists !');
                    $('#cvendor-email').val('');
                }
                else{
                    $('#emails-message-ids').text('');
                }
                
            },
            error: function(xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });
    
    $('#workphones').on('input', function() {
            
        var wPhone = $(this).val();
        
        $.ajax({
            type: 'GET',
            url:'{% url "check_vendor_recc_work_phone_exist" %}',
            data: {
                w_Phone: wPhone
            },
            success: function(response) {
                if (response.exists) {
                    $('#workphone_labels').text('Work phone number already exists !');
                    $('#workphones').val('');
                }
                else{
                    $('#workphone_labels').text('');
                }
                
            },
            error: function(xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });
    
    
    $('#mphones').on('input', function() {
            
        var mPhone = $(this).val();
        
        $.ajax({
            type: 'GET',
            url:'{% url "check_vendor_recc_phonenumber_exist" %}',
            data: {
                m_Phone: mPhone
            },
            success: function(response) {
                if (response.exists) {
                    $('#mphone_labels').text('Phone number already exists !');
                    $('#mphones').val('');
                }
                else{
                    $('#mphone_labels').text('');
                }
                
            },
            error: function(xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });
    
    </script>
    
    
    
    <script>
        // Work Phone Number Validation 
        $(document).ready(function () {
            $('#workphones').on('input', function () {
                var inputVal = $(this).val();
                var expr = /^[0-9]{7}$/;
                if (expr.test(inputVal)) {
                    $('#work-phone-messages').text('Valid work phone number').css('color', 'green');
                } else {
                    $('#work-phone-messages').text('Invalid work phone number').css('color', 'red');
                }
            });
        });
    
        // Phone Number Validation
        $(document).ready(function () {
            $('#mphones').on('input', function () {
                var inputVal = $(this).val();
                var expr=/^[0-9]{10}$/;
                if (expr.test(inputVal)) {
                    $('#phone-messages').text('Valid  phone number').css('color', 'green');
                } else {
                    $('#phone-messages').text('Invalid  phone number').css('color', 'red');
                }
            });
        });
    </script>

<script>
    function gstPan_function1(){
        var x=document.getElementById('GSTTT').value
        if(x=="Unregistered Business-not Registered under GST")
        {
            document.getElementById("pan1").style.display="block";
            document.getElementById("gst1").style.display="none";

            
        }
        else if((x=="Registered Business-Regular Business that is registered under GST") || (x=="Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x=="Overseas- Persons with who you do import or exports of supplies outside india") || (x=="Special Economic Zone"))
        {
            document.getElementById("gst1").style.display="block";
            document.getElementById("pan1").style.display="block";


        }
    
    }
    </script>
    <script>
    $(document).ready(function(){
  
  // Get the CSRF token from the cookie
      function getCookie(name) {
      var cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          var cookies = document.cookie.split(';');
          for (var i = 0; i < cookies.length; i++) {
              var cookie = cookies[i].trim();
              // Does this cookie string begin with the name we want?
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
      }
      var csrftoken = getCookie('csrftoken');
        
        $('#panInput1').on('input', function(){
        var panNumber = $(this).val();
        var regex = /[A-Z]{5}[0-9]{4}[A-Z]{1}$/;
        if(regex.test(panNumber)) {
            $('#panMessages').text('PAN number is valid.').css('color', 'green');
            // PAN number is valid, call AJAX to check if it exists
            $.ajax({
            url: "{% url 'check_vendor_pan' %}",
            headers: {'X-CSRFToken': csrftoken}, 
            type: 'POST',
            data: {panNumber: panNumber},
            success: function(response) {
                if (response.status == 'exists') {
                    $('#panMessages').text('PAN number already exists.').css({
                        'color': 'red',
                        'font-size': '12px'
                    });
                    
                }
            }
            });
        } else {
            $('#panMessages').text('Please enter a valid PAN number.').css({
                'color': 'red',
                'font-size': '12px'
            });
        }
        });
    });
        // Pna Number Check End 


        // GST Number Check 

        $('#gstInput1').on('input', function(){
            var gstNumber = $(this).val();
            var regex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
            if(regex.test(gstNumber)) {
                $('#gstMessages').text('GST number is valid.').css('color', 'green');
                // GST number is valid, call AJAX to check if it exists
                $.ajax({
                    url: "{% url 'check_gst' %}",
                    headers: {'X-CSRFToken': csrftoken}, 
                    type: 'POST',
                    data: {gstNumber: gstNumber},
                    success: function(response) {
                        if (response.status == 'exists') {
                            $('#gstMessages').text('GST number already exists.').css({
                                'color': 'red',
                                'font-size': '12px'
                            });
                            
                        }
                    }
                    });
            } 
            else {
                $('#gstMessages').text('Please enter a valid GST number.').css({
                    'color': 'red',
                    'font-size': '12px'
                });
            }
            });
    
    </script>

<script>
    $(document).on("click","#termSaves",function(){
   

  $.ajax({
    type : 'POST',
    url:"{% url 'payment_vendor_recc_terms_add' %}",

    data:{
        name : $("#tnames").val(),
        days : $("#tdayss").val(),
        
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        $("#tnames").val('')
        $("#tdayss").val('')
        var paytearmSelect = $('#paytearm-select1'); 
          paytearmSelect.empty();  // Clear existing options
          

          // Add "Select" option
          paytearmSelect.append('<option value="Due on Receipt" selected>Due on Receipt</option>');

          // Add new options based on the Ajax response
          $.each(response.payment_list, function(index, pay_terms) {
            paytearmSelect.append('<option value="' + pay_terms.id + '">' + pay_terms.name + '</option>');
          });
        // reloadPayment();
      },
  });        
});


</script>
<script>
    // Get the input element
    const inputElements = document.getElementById("tnames");

    // Add event listener for input event
    inputElements.addEventListener("input", function() {
        // Convert the input value to uppercase
        this.value = this.value.toUpperCase();
    });
</script>

<script>

$(document).ready(function() {
    $('#tnames').on('input', function() {
        
        var termName = $(this).val();
       
        $.ajax({
            type: 'GET',
            url:'{% url "check_term_exist" %}',
            data: {
                term_name: termName
            },
            success: function(response) {
                if (response.exists) {
                    $('#message-ids').text('Term already exists !');
                    $('#success-message-ids').text('');
                  
                    $('#tnames').val('');
                } else {
                    $('#success-message-ids').text('Term name available !');
                    $('#message-ids').text('');
                }
                
            },
            error: function(xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });
});
</script>
<script>

function myCopyAddressFunction1() {
    var checkBox = document.getElementById("myCheckT1");
    var textatn = document.getElementById("batten1");
    var txtcry = document.getElementById("bctry1");
    var txtadrs11 = document.getElementById("badd11");
    var txtcty = document.getElementById("bcty1");
    var txtstat = document.getElementById("bste1");
    var txtzip = document.getElementById("bzp1");
    var txtphone = document.getElementById("bphone_num1");
    var txtfx = document.getElementById("bfx1");

    var textatn1 = document.getElementById("satten1");
    var txtcry1 = document.getElementById("sctry1");
    var txtadrs21 = document.getElementById("sadd11");
    var txtcty1 = document.getElementById("scty1");
    var txtstat1 = document.getElementById("sste1");
    var txtzip1 = document.getElementById("szp1");
    var txtphone1 = document.getElementById("sphone_num1");
    var txtfx1 = document.getElementById("sfx1");
    if (checkBox.checked == true) {
      textatn1.value = textatn.value;
      txtadrs21.value = txtadrs11.value;
      txtcty1.value = txtcty.value;
      txtstat1.value = txtstat.value;
      txtzip1.value = txtzip.value; 
      txtphone1.value = txtphone.value;
      txtfx1.value = txtfx.value;
      



      

    } else {
      txtadrs21.value = "";
      txtcty1.value = "";
      txtstat1.value = "";
      txtzip1.value = "";
      txtphone1.value = "";
      txtfx1.value = "";
      txtcry1.value = "";
      textatn1.value = "";


    }
  }
  function bphone_number1()
      {
        var a1=document.getElementById("bphone_num1").value;
        var b1=document.getElementById("bphone_labels");
        var expr=/^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Invalid Phone Number.";
        }
        else{
            b1.style.color="green";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Valid Phone Number.";

        }
      }

      function sphone_number1()
      {
        var a1=document.getElementById("sphone_num1").value;
        var b1=document.getElementById("sphone_labels");
        var expr=/^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Invalid Fax Number.";
        }
        else{
            b1.style.color="green";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Valid Fax Number.";

        }
      }

      function fax_number1()
      {
        var a1=document.getElementById("bfx1").value;
        var b1=document.getElementById("fax_labels");
        var expr=/^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Invalid Fax Number.";
        }
        else{
            b1.style.color="green";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Valid Fax Number.";

        }
      }

      function sfax_number1()
      {
        var a1=document.getElementById("sfx1").value;
        var b1=document.getElementById("sfax_labels");
        var expr=/^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Invalid Phone Number.";
        }
        else{
            b1.style.color="green";
            b1.style.fontSize="0.750rem";
            b1.innerHTML = "Valid Phone Number.";

        }
      }
</script>

<script>
    $('document').ready(function () {
        $('.add_another1').click(function () {
          $("#tbl1").append(`<tr>
            <td>
                <select name="salutation[]" id="SALS" class="form-control bg-transparent border-1 text-white">
                    <option value="Mr" class="text-dark" selected>Mr.</option>
                    <option class="text-dark" value=""Mrs">Mrs.</option>
                    <option class="text-dark" value="Ms">Ms.</option>
                    <option class="text-dark" value="Miss">Miss.</option>
                    <option class="text-dark" value="Dr">Dr.</option>
                </select>  
            </td>
            <td>
                <input type="text" name="first_names[]" id="first_names" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="text" name="last_names[]" id="last_names" class="form-control border-1 bg-transparent text-white"   value="" />
            </td>
            <td>
                <input type="email" name="emails[]" id="emails" class="form-control border-1 bg-transparent text-white" value="" />
            </td>
            <td>
                <input type="tel" pattern="[0-9]{7}" id="twphones" name="wphones[]" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="tel" pattern="[0-9]{10}" id="tmobiles" onclick="sample12()" name="mobile[]" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="number" onclick="sample11()" name="skypes[]" id="skypes" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="text" name="designations[]" id="designations" class="form-control border-1 bg-transparent text-white" value="" />
            </td>
            <td>
                <input type="text" name="departments[]"  id ="departments" class="form-control border-1 bg-transparent text-white" value="" />
            </td>
        </tr>`);
        });
      })

</script>
<script>
    
    function sample11()
      {

        var tbldata = document.getElementById("tbl1");
        var total_rows = tbldata.rows.length;
        x=document.getElementById("tbl1");
        var a1=x.rows[total_rows-1].cells[5].getElementsByTagName('input')[0].value;

        var b1=document.getElementById("tlabels");

        b1.innerHTML = "";

        var expr=/^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.innerHTML = "Invalid";
            b1.style.fontSize="0.750rem";
        }
        else{
            b1.style.color="green";
            b1.innerHTML = "Valid";
            b1.style.fontSize="0.750rem";

        }

       

      }

      function sample12()
      {

        var tbldata = document.getElementById("tbl1");
        var total_rows = tbldata.rows.length;
        x=document.getElementById("tbl1");
        var a1=x.rows[total_rows-1].cells[4].getElementsByTagName('input')[0].value;

        var b1=document.getElementById("twph_labels");

        b1.innerHTML = "";

        var expr=/^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.innerHTML = "Invalid";
            b1.style.fontSize="0.750rem";
        }
        else{
            b1.style.color="green";
            b1.innerHTML = "valid";
            b1.style.fontSize="0.750rem";

        }


      }


</script>


<script>
    $(document).on("click", "#newVendorSave", function(){
      console.log("entered into vendor load")
      var title = $('#salutationss').val();
      var fName = $('#Fname').val();
      var lName = $('#Lname').val();
      var placeSupply = $('#PLACES').val();
      var gstType = $("#GSTTT").val();
      var gstIN = $("#gstInput1").val();
      var panNo = $("#panInput1").val();
      var Email = $("#cvendor-email").val();
      var Mob = $("#mphones").val();
      var street = $("#badd11").val();
      var city = $("#bcty1").val();
      var state = $("#bste1").val();
      var pin = $("#bzp1").val();
      var country = $("#btry1").val();
      console.log(title);
      console.log(fName);
      console.log(lName);
      console.log(placeSupply);console.log(gstType);console.log(gstIN);console.log(panNo);console.log(Email);console.log(Mob);console.log(street);
      console.log(city);console.log(state);console.log(pin);console.log(country);
     
      var tSalutation = []
      var tFirstName = []
      var tLastName = []
      var tEmail = []
      var tWork = []
      var tMobile = []
      var tSkype = []
      var tDesignation = []
      var tDepartment = []

      if(gstType != "" && gstType != "Unregistered Business-not Registered under GST" && gstType != 'Overseas- Persons with who you do import or exports of supplies outside india' && gstIN == ""){
          alert('Fill Enter GSTIN..!')
          return
      }

      $('#tbl1 tbody tr').each(function(){
        var row = $(this)
        if(row != ""){
            var sal = row.find('.salutations').val();
            var fn = row.find('.first_names').val();
            var ln = row.find('.last_names').val();
            var eml = row.find('.emails').val();
            var wrk = row.find('.wphones').val();
            var mob = row.find('.mobiles').val();
            var sky = row.find('.skypes').val();
            var dep = row.find('.departments').val();
            var des = row.find('.designations').val();
            console.log(sal,fn,ln, eml,wrk, mob, sky, dep, des)
            // if(sal == "" && fn == "" && ln == "" && eml == "" && wrk == "" && mob == "" && sky == "" && dep == "" && des == ""){
            //     console.log('No table data')
            // }else{
            //     if(sal == "" || fn == "" || ln == "" || eml == "" || wrk == "" || mob == "" || sky == "" || dep == "" || des == ""){
            //         // alert('Fill All Fields of Contact persons table')
            //         // return
            //     }
            // }
            tSalutation.push(sal);
            tFirstName.push(fn);
            tLastName.push(ln);
            tEmail.push(eml);
            tWork.push(wrk);
            tMobile.push(mob);
            tSkype.push(sky);
            tDesignation.push(des);
            tDepartment.push(dep);
        }
    })
    var cols = [tSalutation,tFirstName,tLastName,tEmail,tWork,tMobile,tSkype,tDesignation,tDepartment]
    var cntactTableLength = $('#tbl1 tbody tr').length
    var nullExists = false
    if(cntactTableLength == 1 && tSalutation[0] == "" && tFirstName[0] == "" && tLastName[0] == "" && tEmail[0] == "" && tWork[0] == "" && tMobile[0] == "" && tSkype[0] == "" && tDesignation[0] == "" && tDepartment[0] == ""){
        console.log('No table data')
    }else{
        for(i=0; i<cols.length; i++){
            for(j=0; j<cols[i].length; j++){
                if(cols[i][j] == ''){
                    nullExists = true
                }
            }
        }
        // if(sal == "" || fn == "" || ln == "" || eml == "" || wrk == "" || mob == "" || sky == "" || dep == "" || des == ""){
        //     alert('Fill All Fields of Contact persons table')
        //     return
        // }
    }
    if(nullExists){
        alert('Fill All Fields of Contact persons table')
        return
    }

      
      
          $.ajax({
              type : 'POST',
              url:"{% url 'add_vendor_reccexp' %}",
              data:{
            
                'salutations' : title,
                'first_names' : fName,
                'last_names' : lName,
                'company_names' : $('#com_name').val(),
                'c_display_names' : $('#c_display_name').val(),
                'cvendor_emails' : Email,
                'w_phones' : $('#workphones').val(),



                'm_phones' : Mob,
                'skype_numbers' : $('#skype_numbers').val(),
                'designations' : $('#des').val(),
                'departments' : $('#departs').val(),
                'websites' : $('#webs').val(),
                'gsts' : gstType,
                'remarks' : $('#rmrk').val(),
                'pan_numbers' : panNo,
                'gst_numbers' : gstIN,
                'source_supplys' : placeSupply,
                'currencys' : $('#curny').val(),
                'op_types' : $('input[name="op_type"]:checked').val(),
                'opening_bals' : $('#opa').val(),
                'payment_termss' : $('#paytearm-select1').val(),
               
                
               
                'battentions' : $('#batten1').val(),
                'bcountrys' : country,
                'baddresss' : street,
                'bcitys' : city,
                'bstates' : state,
                'bzips' : pin,
                'bphones' : $('#bphone_num1').val(),
                'bfaxs' : $('#bfx1').val(),
                'sattentions' : $('#satten1').val(),
                's_countrys' : $('#sctry1').val(),
                'saddresss' : $('#sadd11').val(),
                'scitys' : $('#scty1').val(),
                'sstates' : $('#sste1').val(),
                'szips' : $('#szp1').val(),
                'sphones' : $('#sphone_num1').val(),
                'sfaxs' : $('#sfx1').val(),
                'tsalutations[]' : tSalutation,
                'tfirstNames[]' : tFirstName,
                'tlastNames[]' : tLastName,
                'tEmails[]' : tEmail,
                'tWorkPhones[]' : tWork,
                'tMobilePhones[]' : tMobile,
                'tSkypes[]' : tSkype,
                'tDesignations[]' : tDesignation,
                'tDepartments[]' : tDepartment,
                csrfmiddlewaretoken: '{{ csrf_token }}',
              },

              success: function(data) {
                console.log('salutations:', title);
                console.log('first_names:', fName);
                console.log('last_names:', lName);
                console.log('company_names:', $('#com_name').val());
                console.log('c_display_names:', $('#c_display_name').val());
                console.log('cvendor_emails:', Email);
                console.log('w_phones:', $('#workphones').val());
                console.log('m_phones:', Mob);
                console.log('skype_numbers:', $('#skype_numbers').val());
                console.log('designations:', $('#des').val());
                console.log('departments:', $('#departs').val());
                console.log('websites:', $('#webs').val());
                console.log('gsts:', gstType);
                console.log('remarks:', $('#rmrk').val());
                console.log('pan_numbers:', panNo);
                console.log('gst_numbers:', gstIN);
                console.log('source_supplys:', placeSupply);
                console.log('currencys:', $('#curny').val());
                console.log('op_types:', $('input[name="op_type"]:checked').val());
                console.log('opening_bals:', $('#opa').val());
                console.log('payment_termss:', $('#paytearm-select1').val());
                console.log('battentions:', $('#batten1').val());
                console.log('bcountrys:', country);
                console.log('baddresss:', street);
                console.log('bcitys:', city);
                console.log('bstates:', state);
                console.log('bzips:', pin);
                console.log('bphones:', $('#bphone_num1').val());
                console.log('bfaxs:', $('#bfx1').val());
                console.log('sattentions:', $('#satten1').val());
                console.log('s_countrys:', $('#sctry1').val());
                console.log('saddresss:', $('#sadd11').val());
                console.log('scitys:', $('#scty1').val());
                console.log('sstates:', $('#sste1').val());
                console.log('szips:', $('#szp1').val());
                console.log('sphones:', $('#sphone_num1').val());
                console.log('sfaxs:', $('#sfx1').val());
                console.log('tsalutations[]:', tSalutation);
                console.log('tfirstNames[]:', tFirstName);
                console.log('tlastNames[]:', tLastName);
                console.log('tEmails[]:', tEmail);
                console.log('tWorkPhones[]:', tWork);
                console.log('tMobilePhones[]:', tMobile);
                console.log('tSkypes[]:', tSkype);
                console.log('tDesignations[]:', tDesignation);
                console.log('tDepartments[]:', tDepartment);


                    reloadVendor();
               
              },
          });
      
  });


  function reloadVendor() {
    
      $.ajax({
          url: "{%url 'getvendorRe' %}",
          type: "GET",
          dataType: "json",
          data: {},
          csrfmiddlewaretoken: '{{ csrf_token }}',

      success: function(data) {
          var $select = $(document.getElementById('vendor'));
          var selectize = $select[0].selectize;
          $.each(data, function(key, value) {
              selectize.addOption({value:value[0],text:value[1]+' '+value[2]+' '+value[3]});
            //   selectize.addItem(value[0]); 
          });

      },
      error: function(xhr, status, error) {
          console.error(xhr.responseText);
      }

      });
      refreshVendorDetails();

      
      }
</script>


<script>
    
    $(document).ready(function () {
        $(document).ready(function () {
          $('#vendor').selectize({
              sortField: 'value'
          }); 
        });
      });
      
  
      function refreshVendorDetails() {
    console.log($('#vendor').text());
    if ($('#vendor').val() != 0) {
        $.ajax({
            type: 'POST',
            url: "{% url 'getRecExpVendorData' %}",
            data: {
                id: $('#vendor').val(),
                csrfmiddlewaretoken: '{{ csrf_token }}',
            },
            success: function (data) {
                console.log('AJAX-Response-->', data);
                document.getElementById('vendorEmail').value = data.email;
                var placeOfSupplySelect = document.getElementById('source_supply');
                var newOption = new Option(data.shipState, data.shipState); // Create a new option element
                placeOfSupplySelect.appendChild(newOption); // Append the new option to the select element
                placeOfSupplySelect.value = data.shipState; // Set the value of the select element to the desired value

                document.getElementById('vendorGstType').value = data.gstType;

                var vendorBillAddressField = document.getElementById('vendorBillAddress');
                var vendorgstfield =document.getElementById('vendorGstin');
                if (data.street ) {
                    vendorBillAddressField.value = data.street ;
                    vendorBillAddressField.style.display = 'block'; // Show the billing address field
                    document.getElementById('vendorBillAddressLabel').style.display = 'block'; // Show the billing address label
                } else {
                    vendorBillAddressField.value = ''; // Clear the billing address field
                    vendorBillAddressField.style.display = 'none'; // Hide the billing address field
                    document.getElementById('vendorBillAddressLabel').style.display = 'none'; // Hide the billing address label
                }
               
                if (data.gstNo !== 'null' ) {
                    vendorgstfield.value= data.gstNo;
                    vendorgstfield.style.display = 'block';
                    document.getElementById('vendorGstInDisplay').style.display = 'block';
                  
                } else {
                    vendorgstfield.value= '';
                    vendorgstfield.style.display = 'none';
                    document.getElementById('vendorGstInDisplay').style.display = 'none';
                   
                }

                refreshTax()
            }
        });
    } else {
        document.getElementById('vendorEmail').value = "";
        document.getElementById('source_supply').value = "";
        document.getElementById('vendorGstType').value = "";
        document.getElementById('vendorBillAddress').value = "";
        document.getElementById('vendorGstin').value = "";
    }
}

$(document).ready(function () {
    $('#vendor').on('change', function () {
        refreshVendorDetails();
    });
});

  
</script>



<script>
    $(document).on('change','#expenseNumber', function() {
    $('#invNoErr').text('');
    var inv_num = $(this).val();
    if(inv_num != ""){
        console.log(inv_num);
        $.ajax({
            type: "GET",
            url: "{% url 'checkRexpenseNumber' %}",
            data: {
                invNum : inv_num,
            },
            success: function (response) {
                if (response.status){
                    $('#invNoErr').text('');
                }else{
                    $('#invNoErr').text(response.message);
                }
            }
        })
    }
});
</script>

<script>
$(document).ready(function(){
    if ($('#gstin').val() == 'null' )
    {
        $('#gstInDisplay').hide()
    }
   
})
</script>
  

{%endblock%}